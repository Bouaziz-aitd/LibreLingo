(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{591:function(e,t,c){"use strict";c.r(t);var s=c(0),n=(c(156),c(162)),b=c(152),a=c(148),j=c(562),O=c(14),o=c(37);function r(e){let t,c,n=e[3].license+"";return{c(){t=Object(s.F)("p"),c=Object(s.mb)(n),this.h()},l(e){t=Object(s.p)(e,"P",{class:!0});var b=Object(s.n)(t);c=Object(s.s)(b,n),b.forEach(s.E),this.h()},h(){Object(s.j)(t,"class","help is-danger")},m(e,n){Object(s.R)(e,t,n),Object(s.g)(t,c)},p(e,t){8&t&&n!==(n=e[3].license+"")&&Object(s.gb)(c,n)},d(e){e&&Object(s.E)(t)}}}function i(e){let t,c,n=e[3]._form+"";return{c(){t=Object(s.F)("p"),c=Object(s.mb)(n),this.h()},l(e){t=Object(s.p)(e,"P",{class:!0});var b=Object(s.n)(t);c=Object(s.s)(b,n),b.forEach(s.E),this.h()},h(){Object(s.j)(t,"class","help is-danger")},m(e,n){Object(s.R)(e,t,n),Object(s.g)(t,c)},p(e,t){8&t&&n!==(n=e[3]._form+"")&&Object(s.gb)(c,n)},d(e){e&&Object(s.E)(t)}}}function l(e){let t;return{c(){t=Object(s.mb)("Sign up")},l(e){t=Object(s.s)(e,"Sign up")},m(e,c){Object(s.R)(e,t,c)},d(e){e&&Object(s.E)(t)}}}function u(e){let t,c,n,O,o,u,d,g,p,m,f,h,$,w,v,E,y,k,_,S,F,P,T,C,V,x,R,I,A,L,U,N,G,D,J,H,M,Y,z,B;function Q(t){e[9](t)}O=new b.a({});let q={name:"Username",icon:"user",id:"username",formStatus:e[3]};function K(t){e[10](t)}void 0!==e[0]&&(q.value=e[0]),h=new j.a({props:q}),s.l.push(()=>Object(s.k)(h,"value",Q));let W={name:"Email",icon:"envelope",id:"email",formStatus:e[3]};function X(t){e[11](t)}void 0!==e[1]&&(W.value=e[1]),v=new j.a({props:W}),s.l.push(()=>Object(s.k)(v,"value",K));let Z={name:"Password",icon:"lock",id:"password",type:"password",formStatus:e[3]};function ee(t){e[12](t)}void 0!==e[2]&&(Z.value=e[2]),k=new j.a({props:Z}),s.l.push(()=>Object(s.k)(k,"value",X));let te={name:"Repeat password",icon:"lock",id:"password_confirmation",type:"password",formStatus:e[3]};void 0!==e[5]&&(te.value=e[5]),F=new j.a({props:te}),s.l.push(()=>Object(s.k)(F,"value",ee));let ce=null!=e[3].license&&r(e),se=null!=e[3]._form&&i(e);return M=new a.a({props:{loading:e[4],asHref:"/sign-up-success",type:"submit",$$slots:{default:[l]},$$scope:{ctx:e}}}),M.$on("click",(function(){Object(s.S)(e[7])&&e[7].apply(this,arguments)})),{c(){t=Object(s.F)("meta"),n=Object(s.jb)(),Object(s.y)(O.$$.fragment),o=Object(s.jb)(),u=Object(s.F)("section"),d=Object(s.F)("div"),g=Object(s.F)("form"),p=Object(s.F)("h2"),m=Object(s.mb)("Sign up"),f=Object(s.jb)(),Object(s.y)(h.$$.fragment),w=Object(s.jb)(),Object(s.y)(v.$$.fragment),y=Object(s.jb)(),Object(s.y)(k.$$.fragment),S=Object(s.jb)(),Object(s.y)(F.$$.fragment),T=Object(s.jb)(),C=Object(s.F)("div"),V=Object(s.F)("div"),x=Object(s.F)("label"),R=Object(s.F)("input"),I=Object(s.mb)("\n            I agree to the\n            "),A=Object(s.F)("a"),L=Object(s.mb)("Terms and Conditions"),U=Object(s.mb)("\n            and the\n            "),N=Object(s.F)("a"),G=Object(s.mb)("GNU Affero General Public License"),D=Object(s.jb)(),ce&&ce.c(),J=Object(s.jb)(),se&&se.c(),H=Object(s.jb)(),Object(s.y)(M.$$.fragment),this.h()},l(e){const c=Object(s.O)("svelte-14x6y23",document.head);t=Object(s.p)(c,"META",{name:!0,content:!0}),c.forEach(s.E),n=Object(s.r)(e),Object(s.o)(O.$$.fragment,e),o=Object(s.r)(e),u=Object(s.p)(e,"SECTION",{class:!0});var b=Object(s.n)(u);d=Object(s.p)(b,"DIV",{class:!0});var a=Object(s.n)(d);g=Object(s.p)(a,"FORM",{});var j=Object(s.n)(g);p=Object(s.p)(j,"H2",{class:!0});var r=Object(s.n)(p);m=Object(s.s)(r,"Sign up"),r.forEach(s.E),f=Object(s.r)(j),Object(s.o)(h.$$.fragment,j),w=Object(s.r)(j),Object(s.o)(v.$$.fragment,j),y=Object(s.r)(j),Object(s.o)(k.$$.fragment,j),S=Object(s.r)(j),Object(s.o)(F.$$.fragment,j),T=Object(s.r)(j),C=Object(s.p)(j,"DIV",{class:!0});var i=Object(s.n)(C);V=Object(s.p)(i,"DIV",{class:!0});var l=Object(s.n)(V);x=Object(s.p)(l,"LABEL",{class:!0});var $=Object(s.n)(x);R=Object(s.p)($,"INPUT",{type:!0,name:!0,id:!0}),I=Object(s.s)($,"\n            I agree to the\n            "),A=Object(s.p)($,"A",{href:!0});var E=Object(s.n)(A);L=Object(s.s)(E,"Terms and Conditions"),E.forEach(s.E),U=Object(s.s)($,"\n            and the\n            "),N=Object(s.p)($,"A",{href:!0});var _=Object(s.n)(N);G=Object(s.s)(_,"GNU Affero General Public License"),_.forEach(s.E),$.forEach(s.E),l.forEach(s.E),D=Object(s.r)(i),ce&&ce.l(i),i.forEach(s.E),J=Object(s.r)(j),se&&se.l(j),H=Object(s.r)(j),Object(s.o)(M.$$.fragment,j),j.forEach(s.E),a.forEach(s.E),b.forEach(s.E),this.h()},h(){document.title="Sign up - LibreLingo",Object(s.j)(t,"name","description"),Object(s.j)(t,"content",c=e[8]("sign-up.meta.description")),Object(s.j)(p,"class","is-size-2"),Object(s.j)(R,"type","checkbox"),Object(s.j)(R,"name","license"),Object(s.j)(R,"id","license"),Object(s.j)(A,"href","/tos"),Object(s.j)(N,"href","/license"),Object(s.j)(x,"class","checkbox"),Object(s.j)(V,"class","control"),Object(s.j)(C,"class","field"),Object(s.j)(d,"class","container"),Object(s.j)(u,"class","section")},m(c,b){Object(s.g)(document.head,t),Object(s.R)(c,n,b),Object(s.V)(O,c,b),Object(s.R)(c,o,b),Object(s.R)(c,u,b),Object(s.g)(u,d),Object(s.g)(d,g),Object(s.g)(g,p),Object(s.g)(p,m),Object(s.g)(g,f),Object(s.V)(h,g,null),Object(s.g)(g,w),Object(s.V)(v,g,null),Object(s.g)(g,y),Object(s.V)(k,g,null),Object(s.g)(g,S),Object(s.V)(F,g,null),Object(s.g)(g,T),Object(s.g)(g,C),Object(s.g)(C,V),Object(s.g)(V,x),Object(s.g)(x,R),R.checked=e[6],Object(s.g)(x,I),Object(s.g)(x,A),Object(s.g)(A,L),Object(s.g)(x,U),Object(s.g)(x,N),Object(s.g)(N,G),Object(s.g)(C,D),ce&&ce.m(C,null),Object(s.g)(g,J),se&&se.m(g,null),Object(s.g)(g,H),Object(s.V)(M,g,null),Y=!0,z||(B=[Object(s.T)(R,"change",e[13]),Object(s.T)(g,"submit",Object(s.bb)((function(){Object(s.S)(e[7])&&e[7].apply(this,arguments)})))],z=!0)},p(n,[b]){e=n,(!Y||256&b&&c!==(c=e[8]("sign-up.meta.description")))&&Object(s.j)(t,"content",c);const a={};8&b&&(a.formStatus=e[3]),!$&&1&b&&($=!0,a.value=e[0],Object(s.d)(()=>$=!1)),h.$set(a);const j={};8&b&&(j.formStatus=e[3]),!E&&2&b&&(E=!0,j.value=e[1],Object(s.d)(()=>E=!1)),v.$set(j);const O={};8&b&&(O.formStatus=e[3]),!_&&4&b&&(_=!0,O.value=e[2],Object(s.d)(()=>_=!1)),k.$set(O);const o={};8&b&&(o.formStatus=e[3]),!P&&32&b&&(P=!0,o.value=e[5],Object(s.d)(()=>P=!1)),F.$set(o),64&b&&(R.checked=e[6]),null!=e[3].license?ce?ce.p(e,b):(ce=r(e),ce.c(),ce.m(C,null)):ce&&(ce.d(1),ce=null),null!=e[3]._form?se?se.p(e,b):(se=i(e),se.c(),se.m(g,H)):se&&(se.d(1),se=null);const l={};16&b&&(l.loading=e[4]),524288&b&&(l.$$scope={dirty:b,ctx:e}),M.$set(l)},i(e){Y||(Object(s.ob)(O.$$.fragment,e),Object(s.ob)(h.$$.fragment,e),Object(s.ob)(v.$$.fragment,e),Object(s.ob)(k.$$.fragment,e),Object(s.ob)(F.$$.fragment,e),Object(s.ob)(M.$$.fragment,e),Y=!0)},o(e){Object(s.pb)(O.$$.fragment,e),Object(s.pb)(h.$$.fragment,e),Object(s.pb)(v.$$.fragment,e),Object(s.pb)(k.$$.fragment,e),Object(s.pb)(F.$$.fragment,e),Object(s.pb)(M.$$.fragment,e),Y=!1},d(e){Object(s.E)(t),e&&Object(s.E)(n),Object(s.C)(O,e),e&&Object(s.E)(o),e&&Object(s.E)(u),Object(s.C)(h),Object(s.C)(v),Object(s.C)(k),Object(s.C)(F),ce&&ce.d(),se&&se.d(),Object(s.C)(M),z=!1,Object(s.cb)(B)}}}const d=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i;function g(e,t,c){let b;Object(s.t)(e,O.a,e=>c(8,b=e));let a=!1,j="",r="",i="",l="",u=!1,g={};let p;return e.$$.update=()=>{15&e.$$.dirty&&c(7,p=async()=>{c(4,a=!0),c(3,g={}),j?j.length<4&&c(3,g=Object.assign(Object.assign({},g),{username:"Please choose a username that has at least 4 characters"})):c(3,g=Object.assign(Object.assign({},g),{username:"Please choose a username"})),r?d.test(r)||c(3,g=Object.assign(Object.assign({},g),{email:"This does not look like a valid email address"})):c(3,g=Object.assign(Object.assign({},g),{email:"Please tell us your email address"})),i?i.length<6?c(3,g=Object.assign(Object.assign({},g),{password:"Your password is too short. Please choose a password that's at least 5 characters long."})):l?i===l||c(3,g=Object.assign(Object.assign({},g),{password_confirmation:"The passwords don't match"})):c(3,g=Object.assign(Object.assign({},g),{password_confirmation:"Please verify your chosen password by repeating it"})):c(3,g=Object.assign(Object.assign({},g),{password:"Please choose a password"})),u?j.length<4&&c(3,g=Object.assign(Object.assign({},g),{username:"Please choose a username that has at least 4 characters"})):c(3,g=Object.assign(Object.assign({},g),{license:"You have to accept the agreements."})),(null===window||void 0===window?void 0:window._test_fake_signup)&&(null===window||void 0===window?void 0:window._test_user_already_exists)&&c(3,g=Object.assign(Object.assign({},g),{_form:"User already exists. Please choose another username."}));const e=0===Object.keys(g).length;!0===Object(o.a)()&&((null===window||void 0===window?void 0:window._test_fake_signup)?setTimeout((function(){!0===e?(c(4,a=!1),window.location.href="/sign-up-success"):c(4,a=!1)}),500):e?fetch(n.a.database.signUpEndpoint,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:j,email:r,password:i})}).then(e=>e.json()).then(({success:e,error:t})=>{e?(c(4,a=!1),window.location.href="/sign-up-success"):(c(4,a=!1),"invalid-payload"===t.code?c(3,g=t.details):c(3,g={_form:"Server error"}))}):c(4,a=!1))})},[j,r,i,g,a,l,u,p,b,function(e){j=e,c(0,j)},function(e){r=e,c(1,r)},function(e){i=e,c(2,i)},function(e){l=e,c(5,l)},function(){u=this.checked,c(6,u)}]}class p extends s.b{constructor(e){super(),Object(s.Q)(this,e,g,u,s.db,{})}}t.default=p}}]);