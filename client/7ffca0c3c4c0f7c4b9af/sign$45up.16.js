(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{147:function(e,t,c){"use strict";var n=c(0),s=c(13),a=c(156),r=c(148),b=c(150);function i(e){Object(n.h)(e,"svelte-1rriw57",'@keyframes svelte-1rriw57-spinner{to{transform:rotate(360deg)}}.lluis-button.svelte-1rriw57{display:inline-block;max-width:100%}div.svelte-1rriw57>*{display:inline-block;border-radius:var(--button-radius-small);padding:6px 20px;margin:4px;transition-property:filter;transition-duration:0.1s;transition-timing-function:ease-in-out}div.svelte-1rriw57>* .icon{width:unset;height:unset;margin-right:8px}div.svelte-1rriw57>*:hover,div.svelte-1rriw57>*:focus{filter:brightness(1.2)}div.svelte-1rriw57>*:active{filter:brightness(0.9);transform:scale(0.9)}.spinner.svelte-1rriw57{display:flex;width:16px;height:16px;align-items:center;justify-content:center;animation:svelte-1rriw57-spinner 0.6s linear infinite}.spinner.svelte-1rriw57 .icon{display:block;margin:0 !important}div[data-style="primary"].svelte-1rriw57>*{border:1px solid var(--button-primary-border);color:var(--button-primary-text-color) !important;background-color:var(--button-primary-background-color) !important}div[data-style="secondary"].svelte-1rriw57>*{border:1px solid var(--button-secondary-border);color:var(--button-secondary-text-color) !important;background-color:var(--button-secondary-background-color) !important}div[data-style="key"].svelte-1rriw57>*{margin:6px;padding:6px 0;text-align:center;width:calc(1em + 22px);border:1px solid var(--button-key-border);color:var(--button-key-text-color) !important;background-color:var(--button-key-background-color) !important}.small.svelte-1rriw57>*{font-size:16px;padding:3px 12px}.large.svelte-1rriw57>*{font-size:20px;padding:9px 14px}')}function o(e){let t,c;return t=new b.a({props:{$$slots:{"icon-left":[O],default:[j]},$$scope:{ctx:e}}}),{c(){Object(n.y)(t.$$.fragment)},l(e){Object(n.o)(t.$$.fragment,e)},m(e,s){Object(n.V)(t,e,s),c=!0},p(e,c){const n={};4096&c&&(n.$$scope={dirty:c,ctx:e}),t.$set(n)},i(e){c||(Object(n.ob)(t.$$.fragment,e),c=!0)},o(e){Object(n.pb)(t.$$.fragment,e),c=!1},d(e){Object(n.C)(t,e)}}}function l(e){let t,c,s;return c=new r.a({props:{icon:"spinner"}}),{c(){t=Object(n.F)("span"),Object(n.y)(c.$$.fragment),this.h()},l(e){t=Object(n.p)(e,"SPAN",{class:!0});var s=Object(n.n)(t);Object(n.o)(c.$$.fragment,s),s.forEach(n.E),this.h()},h(){Object(n.j)(t,"class","spinner svelte-1rriw57")},m(e,a){Object(n.R)(e,t,a),Object(n.V)(c,t,null),s=!0},p:n.W,i(e){s||(Object(n.ob)(c.$$.fragment,e),s=!0)},o(e){Object(n.pb)(c.$$.fragment,e),s=!1},d(e){e&&Object(n.E)(t),Object(n.C)(c)}}}function j(e){let t;const c=e[10].default,s=Object(n.B)(c,e,e[12],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,c){s&&s.m(e,c),t=!0},p(e,a){s&&s.p&&(!t||4096&a)&&Object(n.rb)(s,c,e,e[12],t?Object(n.K)(c,e[12],a,null):Object(n.J)(e[12]),null)},i(e){t||(Object(n.ob)(s,e),t=!0)},o(e){Object(n.pb)(s,e),t=!1},d(e){s&&s.d(e)}}}function O(e){let t;return{c(){t=Object(n.F)("div"),this.h()},l(e){t=Object(n.p)(e,"DIV",{slot:!0,class:!0}),Object(n.n)(t).forEach(n.E),this.h()},h(){Object(n.j)(t,"slot","icon-left"),Object(n.j)(t,"class","svelte-1rriw57")},m(e,c){Object(n.R)(e,t,c)},p:n.W,d(e){e&&Object(n.E)(t)}}}function d(e){let t,c,s,a;const r=[l,o],b=[];function i(e,t){return e[2]?0:1}return t=i(e),c=b[t]=r[t](e),{c(){c.c(),s=Object(n.G)()},l(e){c.l(e),s=Object(n.G)()},m(e,c){b[t].m(e,c),Object(n.R)(e,s,c),a=!0},p(e,a){let o=t;t=i(e),t===o?b[t].p(e,a):(Object(n.N)(),Object(n.pb)(b[o],1,1,()=>{b[o]=null}),Object(n.m)(),c=b[t],c?c.p(e,a):(c=b[t]=r[t](e),c.c()),Object(n.ob)(c,1),c.m(s.parentNode,s))},i(e){a||(Object(n.ob)(c),a=!0)},o(e){Object(n.pb)(c),a=!1},d(e){b[t].d(e),e&&Object(n.E)(s)}}}function u(e){let t,c;return{c(){t=Object(n.F)("a"),c=Object(n.mb)(" "),this.h()},l(e){t=Object(n.p)(e,"A",{class:!0,href:!0});var s=Object(n.n)(t);c=Object(n.s)(s," "),s.forEach(n.E),this.h()},h(){Object(n.j)(t,"class","hidden-link"),Object(n.j)(t,"href",e[3])},m(e,s){Object(n.R)(e,t,s),Object(n.g)(t,c)},p(e,c){8&c&&Object(n.j)(t,"href",e[3])},d(e){e&&Object(n.E)(t)}}}function p(e){let t,c,s,r,b;c=new a.a({props:{href:e[0],type:e[4],target:e[6],tabIndex:e[7],disabled:e[8],$$slots:{default:[d]},$$scope:{ctx:e}}}),c.$on("click",e[11]);let i=null!=e[3]&&u(e);return{c(){t=Object(n.F)("div"),Object(n.y)(c.$$.fragment),s=Object(n.jb)(),i&&i.c(),r=Object(n.G)(),this.h()},l(e){t=Object(n.p)(e,"DIV",{class:!0,"data-style":!0});var a=Object(n.n)(t);Object(n.o)(c.$$.fragment,a),a.forEach(n.E),s=Object(n.r)(e),i&&i.l(e),r=Object(n.G)(),this.h()},h(){Object(n.j)(t,"class","lluis-button svelte-1rriw57"),Object(n.j)(t,"data-style",e[5]),Object(n.nb)(t,"small","small"===e[1]),Object(n.nb)(t,"large","large"===e[1])},m(e,a){Object(n.R)(e,t,a),Object(n.V)(c,t,null),Object(n.R)(e,s,a),i&&i.m(e,a),Object(n.R)(e,r,a),b=!0},p(e,[s]){const a={};1&s&&(a.href=e[0]),16&s&&(a.type=e[4]),64&s&&(a.target=e[6]),128&s&&(a.tabIndex=e[7]),256&s&&(a.disabled=e[8]),4100&s&&(a.$$scope={dirty:s,ctx:e}),c.$set(a),(!b||32&s)&&Object(n.j)(t,"data-style",e[5]),(!b||2&s)&&Object(n.nb)(t,"small","small"===e[1]),(!b||2&s)&&Object(n.nb)(t,"large","large"===e[1]),null!=e[3]?i?i.p(e,s):(i=u(e),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i(e){b||(Object(n.ob)(c.$$.fragment,e),b=!0)},o(e){Object(n.pb)(c.$$.fragment,e),b=!1},d(e){e&&Object(n.E)(t),Object(n.C)(c),e&&Object(n.E)(s),i&&i.d(e),e&&Object(n.E)(r)}}}function f(e,t,c){let{$$slots:n={},$$scope:a}=t;const r=Object(s.b)();let{href:b=null}=t,{size:i="normal"}=t,{loading:o=!1}=t,{asHref:l=null}=t,{type:j="button"}=t,{style:O="secondary"}=t,{target:d}=t,{tabIndex:u}=t,{disabled:p=!1}=t;return e.$$set=e=>{"href"in e&&c(0,b=e.href),"size"in e&&c(1,i=e.size),"loading"in e&&c(2,o=e.loading),"asHref"in e&&c(3,l=e.asHref),"type"in e&&c(4,j=e.type),"style"in e&&c(5,O=e.style),"target"in e&&c(6,d=e.target),"tabIndex"in e&&c(7,u=e.tabIndex),"disabled"in e&&c(8,p=e.disabled),"$$scope"in e&&c(12,a=e.$$scope)},[b,i,o,l,j,O,d,u,p,r,n,()=>r("click"),a]}class m extends n.b{constructor(e){super(),Object(n.Q)(this,e,f,p,n.db,{href:0,size:1,loading:2,asHref:3,type:4,style:5,target:6,tabIndex:7,disabled:8},i)}}t.a=m},150:function(e,t,c){"use strict";var n=c(0);function s(e){Object(n.h)(e,"svelte-1yrjn1q","div.svelte-1yrjn1q{display:flex}")}function a(e){let t,c;const s=e[5].default,a=Object(n.B)(s,e,e[4],null);return{c(){t=Object(n.F)("div"),a&&a.c(),this.h()},l(e){t=Object(n.p)(e,"DIV",{style:!0,class:!0});var c=Object(n.n)(t);a&&a.l(c),c.forEach(n.E),this.h()},h(){Object(n.j)(t,"style",e[0]),Object(n.j)(t,"class","svelte-1yrjn1q")},m(e,s){Object(n.R)(e,t,s),a&&a.m(t,null),c=!0},p(e,[t]){a&&a.p&&(!c||16&t)&&Object(n.rb)(a,s,e,e[4],c?Object(n.K)(s,e[4],t,null):Object(n.J)(e[4]),null)},i(e){c||(Object(n.ob)(a,e),c=!0)},o(e){Object(n.pb)(a,e),c=!1},d(e){e&&Object(n.E)(t),a&&a.d(e)}}}function r(e,t,c){let{$$slots:n={},$$scope:s}=t,{direction:a="row"}=t,{align:r="normal"}=t,{justify:b="normal"}=t,i=`\n  flex-direction: ${a};\n  align-items: ${r};\n  justify-content: ${b};\n  `;return e.$$set=e=>{"direction"in e&&c(1,a=e.direction),"align"in e&&c(2,r=e.align),"justify"in e&&c(3,b=e.justify),"$$scope"in e&&c(4,s=e.$$scope)},[i,a,r,b,s,n]}class b extends n.b{constructor(e){super(),Object(n.Q)(this,e,r,a,n.db,{direction:1,align:2,justify:3},s)}}t.a=b},155:function(e,t,c){"use strict";(function(e){var n=c(161),s=c(157),a=c(151),r=c(37);let b,i,o;const l=t=>{const s=new(void 0!==e.env.JEST_WORKER_ID?c(149):c(149).default)(t).setMaxListeners(n.a.database.maxNumberOfListeners);return s.changes({since:"now",live:!0,include_docs:!0}).on("change",()=>{if(void 0!==e.env.JEST_WORKER_ID)return;c(152).default.update(e=>({...e,dbUpdatedAt:Date.now()}))}),s};if(!0===Object(r.a)()){const e=c(152).default,t=c(149).default;i=new t(`${n.a.database.remote}/${a.a.get("loginDb")}`,{skip_setup:!0,live:!0}),b=l(n.a.database.local),window._DB=b,a.a.get("loginDb")===Object(s.a)("JohnDoe")&&e.update(e=>({...e,user:{name:"JohnDoe"},online:!0})),a.a.get("loginDb")&&n.a.features.authEnabled?fetch(n.a.database.remote+"/_session",{credentials:"include"}).then(e=>e.json()).then(t=>{null!==t.userCtx.name&&(e.update(e=>({...e,user:{name:t.userCtx.name}})),r())}):e.update(e=>({...e,online:!1})),window._fakeLogin=()=>{a.a.set("loginDb",Object(s.a)("JohnDoe"),{expires:n.a.database.auth.expireDays}),window.location.href="/"},window._Login=async(t,c)=>{if(!1===window._test_credentials_correct)throw new Error("Incorrect username or password");if(!0===window._test_credentials_correct)return window._fakeLogin();const r=await(await fetch(n.a.database.remote+"/_session",{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:c})})).json();if(r.error){if("unauthorized"===r.error)throw new Error("Username or password is incorrect");throw new Error("Couldn't log in. Please try again later")}e.update(e=>({...e,online:null})),a.a.set("loginDb",Object(s.a)(t),{expires:n.a.database.auth.expireDays}),window.location.reload(!1),window.location.href=""},window._Logout=async()=>{try{o&&(await o.cancel(),await fetch(n.a.database.remote+"/_session",{method:"delete"}))}finally{a.a.remove("loginDb"),e.update(e=>({...e,user:null,online:null})),await b.destroy(),window.location.reload(!1)}};const r=()=>{o=b.sync(i).on("complete",(function(){e.update(e=>({...e,online:!0}))})).on("error",(function(){e.update(e=>({...e,online:!1}))}))}}void 0!==e.env.JEST_WORKER_ID&&(b=l(n.a.database.local),b.__reset=async()=>{const e=await b.allDocs();await Promise.all(e.rows.map((function(e){return b.remove(e.id,e.value.rev)})))}),t.a=b}).call(this,c(5))},157:function(e,t,c){"use strict";t.a=e=>"userdb-"+(e=>e.split("").map(e=>e.charCodeAt(0).toString(16)).join(""))(e)},166:function(e,t){},171:function(e,t,c){"use strict";var n=c(0),s=c(148);function a(e){let t,c,s;return{c(){t=Object(n.F)("input"),this.h()},l(e){t=Object(n.p)(e,"INPUT",{class:!0,type:!0,name:!0,id:!0}),this.h()},h(){Object(n.j)(t,"class","input"),Object(n.j)(t,"type","text"),Object(n.j)(t,"name",e[2]),Object(n.j)(t,"id",e[2]),Object(n.nb)(t,"is-danger",null!=e[5])},m(a,r){Object(n.R)(a,t,r),Object(n.hb)(t,e[0]),c||(s=Object(n.T)(t,"input",e[7]),c=!0)},p(e,c){4&c&&Object(n.j)(t,"name",e[2]),4&c&&Object(n.j)(t,"id",e[2]),1&c&&t.value!==e[0]&&Object(n.hb)(t,e[0]),32&c&&Object(n.nb)(t,"is-danger",null!=e[5])},d(e){e&&Object(n.E)(t),c=!1,s()}}}function r(e){let t,c,s;return{c(){t=Object(n.F)("input"),this.h()},l(e){t=Object(n.p)(e,"INPUT",{class:!0,type:!0,name:!0,id:!0}),this.h()},h(){Object(n.j)(t,"class","input"),Object(n.j)(t,"type","password"),Object(n.j)(t,"name",e[2]),Object(n.j)(t,"id",e[2]),Object(n.nb)(t,"is-danger",null!=e[5])},m(a,r){Object(n.R)(a,t,r),Object(n.hb)(t,e[0]),c||(s=Object(n.T)(t,"input",e[8]),c=!0)},p(e,c){4&c&&Object(n.j)(t,"name",e[2]),4&c&&Object(n.j)(t,"id",e[2]),1&c&&t.value!==e[0]&&Object(n.hb)(t,e[0]),32&c&&Object(n.nb)(t,"is-danger",null!=e[5])},d(e){e&&Object(n.E)(t),c=!1,s()}}}function b(e){let t,c;return{c(){t=Object(n.F)("p"),c=Object(n.mb)(e[5]),this.h()},l(s){t=Object(n.p)(s,"P",{class:!0});var a=Object(n.n)(t);c=Object(n.s)(a,e[5]),a.forEach(n.E),this.h()},h(){Object(n.j)(t,"class","help is-danger")},m(e,s){Object(n.R)(e,t,s),Object(n.g)(t,c)},p(e,t){32&t&&Object(n.gb)(c,e[5])},d(e){e&&Object(n.E)(t)}}}function i(e){let t,c,i,o,l,j,O,d,u,p,f="text"===e[4]&&a(e),m="password"===e[4]&&r(e);d=new s.a({props:{size:"small",icon:e[3],left:!0}});let h=null!=e[5]&&b(e);return{c(){t=Object(n.F)("div"),c=Object(n.F)("label"),i=Object(n.mb)(e[1]),o=Object(n.jb)(),l=Object(n.F)("div"),f&&f.c(),j=Object(n.jb)(),m&&m.c(),O=Object(n.jb)(),Object(n.y)(d.$$.fragment),u=Object(n.jb)(),h&&h.c(),this.h()},l(s){t=Object(n.p)(s,"DIV",{class:!0});var a=Object(n.n)(t);c=Object(n.p)(a,"LABEL",{class:!0,for:!0});var r=Object(n.n)(c);i=Object(n.s)(r,e[1]),r.forEach(n.E),o=Object(n.r)(a),l=Object(n.p)(a,"DIV",{class:!0});var b=Object(n.n)(l);f&&f.l(b),j=Object(n.r)(b),m&&m.l(b),O=Object(n.r)(b),Object(n.o)(d.$$.fragment,b),b.forEach(n.E),u=Object(n.r)(a),h&&h.l(a),a.forEach(n.E),this.h()},h(){Object(n.j)(c,"class","label"),Object(n.j)(c,"for",e[2]),Object(n.j)(l,"class","control has-icons-left"),Object(n.j)(t,"class","field")},m(e,s){Object(n.R)(e,t,s),Object(n.g)(t,c),Object(n.g)(c,i),Object(n.g)(t,o),Object(n.g)(t,l),f&&f.m(l,null),Object(n.g)(l,j),m&&m.m(l,null),Object(n.g)(l,O),Object(n.V)(d,l,null),Object(n.g)(t,u),h&&h.m(t,null),p=!0},p(e,[s]){(!p||2&s)&&Object(n.gb)(i,e[1]),(!p||4&s)&&Object(n.j)(c,"for",e[2]),"text"===e[4]?f?f.p(e,s):(f=a(e),f.c(),f.m(l,j)):f&&(f.d(1),f=null),"password"===e[4]?m?m.p(e,s):(m=r(e),m.c(),m.m(l,O)):m&&(m.d(1),m=null);const o={};8&s&&(o.icon=e[3]),d.$set(o),null!=e[5]?h?h.p(e,s):(h=b(e),h.c(),h.m(t,null)):h&&(h.d(1),h=null)},i(e){p||(Object(n.ob)(d.$$.fragment,e),p=!0)},o(e){Object(n.pb)(d.$$.fragment,e),p=!1},d(e){e&&Object(n.E)(t),f&&f.d(),m&&m.d(),Object(n.C)(d),h&&h.d()}}}function o(e,t,c){let{name:n}=t,{id:s}=t,{icon:a}=t,{type:r="text"}=t,{value:b}=t,{formStatus:i={}}=t,o=null;return e.$$set=e=>{"name"in e&&c(1,n=e.name),"id"in e&&c(2,s=e.id),"icon"in e&&c(3,a=e.icon),"type"in e&&c(4,r=e.type),"value"in e&&c(0,b=e.value),"formStatus"in e&&c(6,i=e.formStatus)},e.$$.update=()=>{68&e.$$.dirty&&c(5,o=i[s])},[b,n,s,a,r,o,i,function(){b=this.value,c(0,b)},function(){b=this.value,c(0,b)}]}class l extends n.b{constructor(e){super(),Object(n.Q)(this,e,o,i,n.db,{name:1,id:2,icon:3,type:4,value:0,formStatus:6})}}t.a=l},592:function(e,t,c){"use strict";c.r(t);var n=c(0),s=(c(155),c(161)),a=c(153),r=c(147),b=c(171),i=c(14),o=c(37);function l(e){let t,c,s=e[3].license+"";return{c(){t=Object(n.F)("p"),c=Object(n.mb)(s),this.h()},l(e){t=Object(n.p)(e,"P",{class:!0});var a=Object(n.n)(t);c=Object(n.s)(a,s),a.forEach(n.E),this.h()},h(){Object(n.j)(t,"class","help is-danger")},m(e,s){Object(n.R)(e,t,s),Object(n.g)(t,c)},p(e,t){8&t&&s!==(s=e[3].license+"")&&Object(n.gb)(c,s)},d(e){e&&Object(n.E)(t)}}}function j(e){let t,c,s=e[3]._form+"";return{c(){t=Object(n.F)("p"),c=Object(n.mb)(s),this.h()},l(e){t=Object(n.p)(e,"P",{class:!0});var a=Object(n.n)(t);c=Object(n.s)(a,s),a.forEach(n.E),this.h()},h(){Object(n.j)(t,"class","help is-danger")},m(e,s){Object(n.R)(e,t,s),Object(n.g)(t,c)},p(e,t){8&t&&s!==(s=e[3]._form+"")&&Object(n.gb)(c,s)},d(e){e&&Object(n.E)(t)}}}function O(e){let t;return{c(){t=Object(n.mb)("Sign up")},l(e){t=Object(n.s)(e,"Sign up")},m(e,c){Object(n.R)(e,t,c)},d(e){e&&Object(n.E)(t)}}}function d(e){let t,c,s,i,o,d,u,p,f,m,h,g,$,v,w,y,E,x,_,k,S,R,D,F,I,P,C,T,V,L,N,J,A,U,z,G,H,B,K,W;function Q(t){e[9](t)}i=new a.a({});let q={name:"Username",icon:"user",id:"username",formStatus:e[3]};function M(t){e[10](t)}void 0!==e[0]&&(q.value=e[0]),g=new b.a({props:q}),n.l.push(()=>Object(n.k)(g,"value",Q));let Y={name:"Email",icon:"envelope",id:"email",formStatus:e[3]};function X(t){e[11](t)}void 0!==e[1]&&(Y.value=e[1]),w=new b.a({props:Y}),n.l.push(()=>Object(n.k)(w,"value",M));let Z={name:"Password",icon:"lock",id:"password",type:"password",formStatus:e[3]};function ee(t){e[12](t)}void 0!==e[2]&&(Z.value=e[2]),x=new b.a({props:Z}),n.l.push(()=>Object(n.k)(x,"value",X));let te={name:"Repeat password",icon:"lock",id:"password_confirmation",type:"password",formStatus:e[3]};void 0!==e[5]&&(te.value=e[5]),S=new b.a({props:te}),n.l.push(()=>Object(n.k)(S,"value",ee));let ce=null!=e[3].license&&l(e),ne=null!=e[3]._form&&j(e);return H=new r.a({props:{loading:e[4],asHref:"/sign-up-success",type:"submit",$$slots:{default:[O]},$$scope:{ctx:e}}}),H.$on("click",(function(){Object(n.S)(e[7])&&e[7].apply(this,arguments)})),{c(){t=Object(n.F)("meta"),s=Object(n.jb)(),Object(n.y)(i.$$.fragment),o=Object(n.jb)(),d=Object(n.F)("section"),u=Object(n.F)("div"),p=Object(n.F)("form"),f=Object(n.F)("h2"),m=Object(n.mb)("Sign up"),h=Object(n.jb)(),Object(n.y)(g.$$.fragment),v=Object(n.jb)(),Object(n.y)(w.$$.fragment),E=Object(n.jb)(),Object(n.y)(x.$$.fragment),k=Object(n.jb)(),Object(n.y)(S.$$.fragment),D=Object(n.jb)(),F=Object(n.F)("div"),I=Object(n.F)("div"),P=Object(n.F)("label"),C=Object(n.F)("input"),T=Object(n.mb)("\n            I agree to the\n            "),V=Object(n.F)("a"),L=Object(n.mb)("Terms and Conditions"),N=Object(n.mb)("\n            and the\n            "),J=Object(n.F)("a"),A=Object(n.mb)("GNU Affero General Public License"),U=Object(n.jb)(),ce&&ce.c(),z=Object(n.jb)(),ne&&ne.c(),G=Object(n.jb)(),Object(n.y)(H.$$.fragment),this.h()},l(e){const c=Object(n.O)("svelte-14x6y23",document.head);t=Object(n.p)(c,"META",{name:!0,content:!0}),c.forEach(n.E),s=Object(n.r)(e),Object(n.o)(i.$$.fragment,e),o=Object(n.r)(e),d=Object(n.p)(e,"SECTION",{class:!0});var a=Object(n.n)(d);u=Object(n.p)(a,"DIV",{class:!0});var r=Object(n.n)(u);p=Object(n.p)(r,"FORM",{});var b=Object(n.n)(p);f=Object(n.p)(b,"H2",{class:!0});var l=Object(n.n)(f);m=Object(n.s)(l,"Sign up"),l.forEach(n.E),h=Object(n.r)(b),Object(n.o)(g.$$.fragment,b),v=Object(n.r)(b),Object(n.o)(w.$$.fragment,b),E=Object(n.r)(b),Object(n.o)(x.$$.fragment,b),k=Object(n.r)(b),Object(n.o)(S.$$.fragment,b),D=Object(n.r)(b),F=Object(n.p)(b,"DIV",{class:!0});var j=Object(n.n)(F);I=Object(n.p)(j,"DIV",{class:!0});var O=Object(n.n)(I);P=Object(n.p)(O,"LABEL",{class:!0});var $=Object(n.n)(P);C=Object(n.p)($,"INPUT",{type:!0,name:!0,id:!0}),T=Object(n.s)($,"\n            I agree to the\n            "),V=Object(n.p)($,"A",{href:!0});var y=Object(n.n)(V);L=Object(n.s)(y,"Terms and Conditions"),y.forEach(n.E),N=Object(n.s)($,"\n            and the\n            "),J=Object(n.p)($,"A",{href:!0});var _=Object(n.n)(J);A=Object(n.s)(_,"GNU Affero General Public License"),_.forEach(n.E),$.forEach(n.E),O.forEach(n.E),U=Object(n.r)(j),ce&&ce.l(j),j.forEach(n.E),z=Object(n.r)(b),ne&&ne.l(b),G=Object(n.r)(b),Object(n.o)(H.$$.fragment,b),b.forEach(n.E),r.forEach(n.E),a.forEach(n.E),this.h()},h(){document.title="Sign up - LibreLingo",Object(n.j)(t,"name","description"),Object(n.j)(t,"content",c=e[8]("sign-up.meta.description")),Object(n.j)(f,"class","is-size-2"),Object(n.j)(C,"type","checkbox"),Object(n.j)(C,"name","license"),Object(n.j)(C,"id","license"),Object(n.j)(V,"href","/tos"),Object(n.j)(J,"href","/license"),Object(n.j)(P,"class","checkbox"),Object(n.j)(I,"class","control"),Object(n.j)(F,"class","field"),Object(n.j)(u,"class","container"),Object(n.j)(d,"class","section")},m(c,a){Object(n.g)(document.head,t),Object(n.R)(c,s,a),Object(n.V)(i,c,a),Object(n.R)(c,o,a),Object(n.R)(c,d,a),Object(n.g)(d,u),Object(n.g)(u,p),Object(n.g)(p,f),Object(n.g)(f,m),Object(n.g)(p,h),Object(n.V)(g,p,null),Object(n.g)(p,v),Object(n.V)(w,p,null),Object(n.g)(p,E),Object(n.V)(x,p,null),Object(n.g)(p,k),Object(n.V)(S,p,null),Object(n.g)(p,D),Object(n.g)(p,F),Object(n.g)(F,I),Object(n.g)(I,P),Object(n.g)(P,C),C.checked=e[6],Object(n.g)(P,T),Object(n.g)(P,V),Object(n.g)(V,L),Object(n.g)(P,N),Object(n.g)(P,J),Object(n.g)(J,A),Object(n.g)(F,U),ce&&ce.m(F,null),Object(n.g)(p,z),ne&&ne.m(p,null),Object(n.g)(p,G),Object(n.V)(H,p,null),B=!0,K||(W=[Object(n.T)(C,"change",e[13]),Object(n.T)(p,"submit",Object(n.bb)((function(){Object(n.S)(e[7])&&e[7].apply(this,arguments)})))],K=!0)},p(s,[a]){e=s,(!B||256&a&&c!==(c=e[8]("sign-up.meta.description")))&&Object(n.j)(t,"content",c);const r={};8&a&&(r.formStatus=e[3]),!$&&1&a&&($=!0,r.value=e[0],Object(n.d)(()=>$=!1)),g.$set(r);const b={};8&a&&(b.formStatus=e[3]),!y&&2&a&&(y=!0,b.value=e[1],Object(n.d)(()=>y=!1)),w.$set(b);const i={};8&a&&(i.formStatus=e[3]),!_&&4&a&&(_=!0,i.value=e[2],Object(n.d)(()=>_=!1)),x.$set(i);const o={};8&a&&(o.formStatus=e[3]),!R&&32&a&&(R=!0,o.value=e[5],Object(n.d)(()=>R=!1)),S.$set(o),64&a&&(C.checked=e[6]),null!=e[3].license?ce?ce.p(e,a):(ce=l(e),ce.c(),ce.m(F,null)):ce&&(ce.d(1),ce=null),null!=e[3]._form?ne?ne.p(e,a):(ne=j(e),ne.c(),ne.m(p,G)):ne&&(ne.d(1),ne=null);const O={};16&a&&(O.loading=e[4]),524288&a&&(O.$$scope={dirty:a,ctx:e}),H.$set(O)},i(e){B||(Object(n.ob)(i.$$.fragment,e),Object(n.ob)(g.$$.fragment,e),Object(n.ob)(w.$$.fragment,e),Object(n.ob)(x.$$.fragment,e),Object(n.ob)(S.$$.fragment,e),Object(n.ob)(H.$$.fragment,e),B=!0)},o(e){Object(n.pb)(i.$$.fragment,e),Object(n.pb)(g.$$.fragment,e),Object(n.pb)(w.$$.fragment,e),Object(n.pb)(x.$$.fragment,e),Object(n.pb)(S.$$.fragment,e),Object(n.pb)(H.$$.fragment,e),B=!1},d(e){Object(n.E)(t),e&&Object(n.E)(s),Object(n.C)(i,e),e&&Object(n.E)(o),e&&Object(n.E)(d),Object(n.C)(g),Object(n.C)(w),Object(n.C)(x),Object(n.C)(S),ce&&ce.d(),ne&&ne.d(),Object(n.C)(H),K=!1,Object(n.cb)(W)}}}const u=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i;function p(e,t,c){let a;Object(n.t)(e,i.a,e=>c(8,a=e));let r=!1,b="",l="",j="",O="",d=!1,p={};let f;return e.$$.update=()=>{15&e.$$.dirty&&c(7,f=async()=>{c(4,r=!0),c(3,p={}),b?b.length<4&&c(3,p=Object.assign(Object.assign({},p),{username:"Please choose a username that has at least 4 characters"})):c(3,p=Object.assign(Object.assign({},p),{username:"Please choose a username"})),l?u.test(l)||c(3,p=Object.assign(Object.assign({},p),{email:"This does not look like a valid email address"})):c(3,p=Object.assign(Object.assign({},p),{email:"Please tell us your email address"})),j?j.length<6?c(3,p=Object.assign(Object.assign({},p),{password:"Your password is too short. Please choose a password that's at least 5 characters long."})):O?j===O||c(3,p=Object.assign(Object.assign({},p),{password_confirmation:"The passwords don't match"})):c(3,p=Object.assign(Object.assign({},p),{password_confirmation:"Please verify your chosen password by repeating it"})):c(3,p=Object.assign(Object.assign({},p),{password:"Please choose a password"})),d?b.length<4&&c(3,p=Object.assign(Object.assign({},p),{username:"Please choose a username that has at least 4 characters"})):c(3,p=Object.assign(Object.assign({},p),{license:"You have to accept the agreements."})),(null===window||void 0===window?void 0:window._test_fake_signup)&&(null===window||void 0===window?void 0:window._test_user_already_exists)&&c(3,p=Object.assign(Object.assign({},p),{_form:"User already exists. Please choose another username."}));const e=0===Object.keys(p).length;!0===Object(o.a)()&&((null===window||void 0===window?void 0:window._test_fake_signup)?setTimeout((function(){!0===e?(c(4,r=!1),window.location.href="/sign-up-success"):c(4,r=!1)}),500):e?fetch(s.a.database.signUpEndpoint,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:b,email:l,password:j})}).then(e=>e.json()).then(({success:e,error:t})=>{e?(c(4,r=!1),window.location.href="/sign-up-success"):(c(4,r=!1),"invalid-payload"===t.code?c(3,p=t.details):c(3,p={_form:"Server error"}))}):c(4,r=!1))})},[b,l,j,p,r,O,d,f,a,function(e){b=e,c(0,b)},function(e){l=e,c(1,l)},function(e){j=e,c(2,j)},function(e){O=e,c(5,O)},function(){d=this.checked,c(6,d)}]}class f extends n.b{constructor(e){super(),Object(n.Q)(this,e,p,d,n.db,{})}}t.default=f}}]);