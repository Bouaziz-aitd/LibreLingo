(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{353:function(e,t,c){"use strict";c.r(t);var n=c(0),a=(c(39),c(23)),s=c(38),b=c(31),o=c(90),i=c(5);function l(e){let t,c,a=e[6].license+"";return{c(){t=Object(n.z)("p"),c=Object(n.cb)(a),this.h()},l(e){t=Object(n.n)(e,"P",{class:!0});var s=Object(n.l)(t);c=Object(n.p)(s,a),s.forEach(n.y),this.h()},h(){Object(n.h)(t,"class","help is-danger")},m(e,a){Object(n.J)(e,t,a),Object(n.f)(t,c)},p(e,t){64&t&&a!==(a=e[6].license+"")&&Object(n.X)(c,a)},d(e){e&&Object(n.y)(t)}}}function r(e){let t,c,a=e[6]._form+"";return{c(){t=Object(n.z)("p"),c=Object(n.cb)(a),this.h()},l(e){t=Object(n.n)(e,"P",{class:!0});var s=Object(n.l)(t);c=Object(n.p)(s,a),s.forEach(n.y),this.h()},h(){Object(n.h)(t,"class","help is-danger")},m(e,a){Object(n.J)(e,t,a),Object(n.f)(t,c)},p(e,t){64&t&&a!==(a=e[6]._form+"")&&Object(n.X)(c,a)},d(e){e&&Object(n.y)(t)}}}function j(e){let t;return{c(){t=Object(n.cb)("Sign up")},l(e){t=Object(n.p)(e,"Sign up")},m(e,c){Object(n.J)(e,t,c)},d(e){e&&Object(n.y)(t)}}}function O(e){let t,c,a,i,O,u,d,f,h,p,m,g,w,$,y,v,_,E,S,k,z,x,D,P,L,I,J,N,T,U,A,C,R,V,Y,K,G,X,B,M;function W(t){e[9].call(null,t)}i=new s.a({props:{dark:!0}});let H={name:"Username",icon:"user",id:"username",formStatus:e[6]};function q(t){e[10].call(null,t)}void 0!==e[1]&&(H.value=e[1]),g=new o.a({props:H}),n.j.push(()=>Object(n.i)(g,"value",W));let F={name:"Email",icon:"envelope",id:"email",formStatus:e[6]};function Q(t){e[11].call(null,t)}void 0!==e[2]&&(F.value=e[2]),y=new o.a({props:F}),n.j.push(()=>Object(n.i)(y,"value",q));let Z={name:"Password",icon:"lock",id:"password",type:"password",formStatus:e[6]};function ee(t){e[12].call(null,t)}void 0!==e[3]&&(Z.value=e[3]),E=new o.a({props:Z}),n.j.push(()=>Object(n.i)(E,"value",Q));let te={name:"Repeat password",icon:"lock",id:"password_confirmation",type:"password",formStatus:e[6]};void 0!==e[4]&&(te.value=e[4]),z=new o.a({props:te}),n.j.push(()=>Object(n.i)(z,"value",ee));let ce=null!=e[6].license&&l(e),ne=null!=e[6]._form&&r(e);return G=new b.a({props:{loading:e[0],asHref:"/sign-up-success",submit:!0,$$slots:{default:[j]},$$scope:{ctx:e}}}),G.$on("click",(function(){Object(n.K)(e[7])&&e[7].apply(this,arguments)})),{c(){t=Object(n.z)("meta"),a=Object(n.ab)(),Object(n.s)(i.$$.fragment),O=Object(n.ab)(),u=Object(n.z)("section"),d=Object(n.z)("div"),f=Object(n.z)("form"),h=Object(n.z)("h2"),p=Object(n.cb)("Sign up"),m=Object(n.ab)(),Object(n.s)(g.$$.fragment),$=Object(n.ab)(),Object(n.s)(y.$$.fragment),_=Object(n.ab)(),Object(n.s)(E.$$.fragment),k=Object(n.ab)(),Object(n.s)(z.$$.fragment),D=Object(n.ab)(),P=Object(n.z)("div"),L=Object(n.z)("div"),I=Object(n.z)("label"),J=Object(n.z)("input"),N=Object(n.cb)("\n            I agree to the\n            "),T=Object(n.z)("a"),U=Object(n.cb)("Terms and Conditions"),A=Object(n.cb)("\n            and the\n            "),C=Object(n.z)("a"),R=Object(n.cb)("GNU Affero General Public License"),V=Object(n.ab)(),ce&&ce.c(),Y=Object(n.ab)(),ne&&ne.c(),K=Object(n.ab)(),Object(n.s)(G.$$.fragment),this.h()},l(e){const c=Object(n.T)('[data-svelte="svelte-14x6y23"]',document.head);t=Object(n.n)(c,"META",{name:!0,content:!0}),c.forEach(n.y),a=Object(n.o)(e),Object(n.m)(i.$$.fragment,e),O=Object(n.o)(e),u=Object(n.n)(e,"SECTION",{class:!0});var s=Object(n.l)(u);d=Object(n.n)(s,"DIV",{class:!0});var b=Object(n.l)(d);f=Object(n.n)(b,"FORM",{});var o=Object(n.l)(f);h=Object(n.n)(o,"H2",{class:!0});var l=Object(n.l)(h);p=Object(n.p)(l,"Sign up"),l.forEach(n.y),m=Object(n.o)(o),Object(n.m)(g.$$.fragment,o),$=Object(n.o)(o),Object(n.m)(y.$$.fragment,o),_=Object(n.o)(o),Object(n.m)(E.$$.fragment,o),k=Object(n.o)(o),Object(n.m)(z.$$.fragment,o),D=Object(n.o)(o),P=Object(n.n)(o,"DIV",{class:!0});var r=Object(n.l)(P);L=Object(n.n)(r,"DIV",{class:!0});var j=Object(n.l)(L);I=Object(n.n)(j,"LABEL",{class:!0});var w=Object(n.l)(I);J=Object(n.n)(w,"INPUT",{type:!0,name:!0,id:!0}),N=Object(n.p)(w,"\n            I agree to the\n            "),T=Object(n.n)(w,"A",{href:!0});var v=Object(n.l)(T);U=Object(n.p)(v,"Terms and Conditions"),v.forEach(n.y),A=Object(n.p)(w,"\n            and the\n            "),C=Object(n.n)(w,"A",{href:!0});var S=Object(n.l)(C);R=Object(n.p)(S,"GNU Affero General Public License"),S.forEach(n.y),w.forEach(n.y),j.forEach(n.y),V=Object(n.o)(r),ce&&ce.l(r),r.forEach(n.y),Y=Object(n.o)(o),ne&&ne.l(o),K=Object(n.o)(o),Object(n.m)(G.$$.fragment,o),o.forEach(n.y),b.forEach(n.y),s.forEach(n.y),this.h()},h(){document.title="Sign up - LibreLingo",Object(n.h)(t,"name","description"),Object(n.h)(t,"content",c=e[8]("sign-up.meta.description")),Object(n.h)(h,"class","is-size-2"),Object(n.h)(J,"type","checkbox"),Object(n.h)(J,"name","license"),Object(n.h)(J,"id","license"),Object(n.h)(T,"href","/tos"),Object(n.h)(C,"href","/license"),Object(n.h)(I,"class","checkbox"),Object(n.h)(L,"class","control"),Object(n.h)(P,"class","field"),Object(n.h)(d,"class","container"),Object(n.h)(u,"class","section")},m(c,s){Object(n.f)(document.head,t),Object(n.J)(c,a,s),Object(n.N)(i,c,s),Object(n.J)(c,O,s),Object(n.J)(c,u,s),Object(n.f)(u,d),Object(n.f)(d,f),Object(n.f)(f,h),Object(n.f)(h,p),Object(n.f)(f,m),Object(n.N)(g,f,null),Object(n.f)(f,$),Object(n.N)(y,f,null),Object(n.f)(f,_),Object(n.N)(E,f,null),Object(n.f)(f,k),Object(n.N)(z,f,null),Object(n.f)(f,D),Object(n.f)(f,P),Object(n.f)(P,L),Object(n.f)(L,I),Object(n.f)(I,J),J.checked=e[5],Object(n.f)(I,N),Object(n.f)(I,T),Object(n.f)(T,U),Object(n.f)(I,A),Object(n.f)(I,C),Object(n.f)(C,R),Object(n.f)(P,V),ce&&ce.m(P,null),Object(n.f)(f,Y),ne&&ne.m(f,null),Object(n.f)(f,K),Object(n.N)(G,f,null),X=!0,B||(M=[Object(n.L)(J,"change",e[13]),Object(n.L)(f,"submit",Object(n.S)((function(){Object(n.K)(e[7])&&e[7].apply(this,arguments)})))],B=!0)},p(a,[s]){e=a,(!X||256&s&&c!==(c=e[8]("sign-up.meta.description")))&&Object(n.h)(t,"content",c);const b={};64&s&&(b.formStatus=e[6]),!w&&2&s&&(w=!0,b.value=e[1],Object(n.c)(()=>w=!1)),g.$set(b);const o={};64&s&&(o.formStatus=e[6]),!v&&4&s&&(v=!0,o.value=e[2],Object(n.c)(()=>v=!1)),y.$set(o);const i={};64&s&&(i.formStatus=e[6]),!S&&8&s&&(S=!0,i.value=e[3],Object(n.c)(()=>S=!1)),E.$set(i);const j={};64&s&&(j.formStatus=e[6]),!x&&16&s&&(x=!0,j.value=e[4],Object(n.c)(()=>x=!1)),z.$set(j),32&s&&(J.checked=e[5]),null!=e[6].license?ce?ce.p(e,s):(ce=l(e),ce.c(),ce.m(P,null)):ce&&(ce.d(1),ce=null),null!=e[6]._form?ne?ne.p(e,s):(ne=r(e),ne.c(),ne.m(f,K)):ne&&(ne.d(1),ne=null);const O={};1&s&&(O.loading=e[0]),524288&s&&(O.$$scope={dirty:s,ctx:e}),G.$set(O)},i(e){X||(Object(n.eb)(i.$$.fragment,e),Object(n.eb)(g.$$.fragment,e),Object(n.eb)(y.$$.fragment,e),Object(n.eb)(E.$$.fragment,e),Object(n.eb)(z.$$.fragment,e),Object(n.eb)(G.$$.fragment,e),X=!0)},o(e){Object(n.fb)(i.$$.fragment,e),Object(n.fb)(g.$$.fragment,e),Object(n.fb)(y.$$.fragment,e),Object(n.fb)(E.$$.fragment,e),Object(n.fb)(z.$$.fragment,e),Object(n.fb)(G.$$.fragment,e),X=!1},d(e){Object(n.y)(t),e&&Object(n.y)(a),Object(n.w)(i,e),e&&Object(n.y)(O),e&&Object(n.y)(u),Object(n.w)(g),Object(n.w)(y),Object(n.w)(E),Object(n.w)(z),ce&&ce.d(),ne&&ne.d(),Object(n.w)(G),B=!1,Object(n.U)(M)}}}const u=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;function d(e,t,c){let s;Object(n.q)(e,i.a,e=>c(8,s=e));let b=!1,o="",l="",r="",j="",O=!1,d={};let f;return e.$$.update=()=>{78&e.$$.dirty&&c(7,f=async()=>{c(0,b=!0),c(6,d={}),o?o.length<4&&c(6,d=Object.assign(Object.assign({},d),{username:"Please choose a username that has at least 4 characters"})):c(6,d=Object.assign(Object.assign({},d),{username:"Please choose a username"})),l?u.test(l)||c(6,d=Object.assign(Object.assign({},d),{email:"This does not look like a valid email address"})):c(6,d=Object.assign(Object.assign({},d),{email:"Please tell us your email address"})),r?r.length<6?c(6,d=Object.assign(Object.assign({},d),{password:"Your password is too short. Please choose a password that's at least 5 characters long."})):j?r===j||c(6,d=Object.assign(Object.assign({},d),{password_confirmation:"The passwords don't match"})):c(6,d=Object.assign(Object.assign({},d),{password_confirmation:"Please verify your chosen password by repeating it"})):c(6,d=Object.assign(Object.assign({},d),{password:"Please choose a password"})),O?o.length<4&&c(6,d=Object.assign(Object.assign({},d),{username:"Please choose a username that has at least 4 characters"})):c(6,d=Object.assign(Object.assign({},d),{license:"You have to accept the agreements."})),window._test_fake_signup&&window._test_user_already_exists&&c(6,d=Object.assign(Object.assign({},d),{_form:"User already exists. Please choose another username."}));const e=0===Object.keys(d).length;window._test_fake_signup?setTimeout((function(){!0===e?(c(0,b=!1),window.location="/sign-up-success"):c(0,b=!1)}),500):e?fetch(a.a.database.signUpEndpoint,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,email:l,password:r})}).then(e=>e.json()).then(({success:e,error:t})=>{e?(c(0,b=!1),window.location="/sign-up-success"):(c(0,b=!1),"invalid-payload"===t.code?c(6,d=t.details):c(6,d={_form:"Server error"}))}):c(0,b=!1)})},[b,o,l,r,j,O,d,f,s,function(e){o=e,c(1,o)},function(e){l=e,c(2,l)},function(e){r=e,c(3,r)},function(e){j=e,c(4,j)},function(){O=this.checked,c(5,O)}]}class f extends n.a{constructor(e){super(),Object(n.I)(this,e,d,O,n.V,{})}}t.default=f},39:function(e,t,c){"use strict";(function(e){var n=c(23),a=c(42),s=c(9),b=c.n(s);let o,i,l;const r=t=>{const a=new(void 0!==e.env.JEST_WORKER_ID?c(32):c(32).default)(t).setMaxListeners(n.a.database.maxNumberOfListeners);return a.changes({since:"now",live:!0,include_docs:!0}).on("change",()=>{if(void 0!==e.env.JEST_WORKER_ID)return;c(21).default.update(e=>({...e,dbUpdatedAt:Date.now()}))}),a};{const e=c(21).default,t=c(32).default;i=new t(`${n.a.database.remote}/${b.a.get("loginDb")}`,{skip_setup:!0,live:!0}),o=r(n.a.database.local),window._DB=o,b.a.get("loginDb")===Object(a.a)("---fakeUser")&&e.update(e=>({...e,user:{name:"---fakeUser"},online:!0})),b.a.get("loginDb")&&n.a.features.authEnabled?fetch(`${n.a.database.remote}/_session`,{credentials:"include"}).then(e=>e.json()).then(t=>{null!==t.userCtx.name&&(e.update(e=>({...e,user:{name:t.userCtx.name}})),s())}):e.update(e=>({...e,online:!1})),window._fakeLogin=()=>{b.a.set("loginDb",Object(a.a)("---fakeUser"),{expires:n.a.database.auth.expireDays}),window.location.href="/course/spanish-from-english/"},window._Login=async(t,c)=>{if(!1===window._test_credentials_correct)throw new Error("Incorrect username or password");if(!0===window._test_credentials_correct)return window._fakeLogin();const s=await(await fetch(`${n.a.database.remote}/_session`,{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:c})})).json();if(s.error){if("unauthorized"===s.error)throw new Error("Username or password is incorrect");throw new Error("Couldn't log in. Please try again later")}e.update(e=>({...e,online:null})),b.a.set("loginDb",Object(a.a)(t),{expires:n.a.database.auth.expireDays}),window.location.reload(!1),window.location.href="/course/spanish-from-english/"},window._Logout=async()=>{try{l&&(await l.cancel(),await fetch(`${n.a.database.remote}/_session`,{method:"delete"}))}finally{b.a.remove("loginDb"),e.update(e=>({...e,user:null,online:null})),await o.destroy(),window.location.reload(!1)}};const s=()=>{l=o.sync(i).on("complete",(function(){e.update(e=>({...e,online:!0}))})).on("error",(function(){e.update(e=>({...e,online:!1}))}))}}void 0!==e.env.JEST_WORKER_ID&&(o=r(n.a.database.local),o.__reset=async()=>{const e=await o.allDocs();await Promise.all(e.rows.map((function(e){return o.remove(e.id,e.value.rev)})))}),t.a=o}).call(this,c(22))},42:function(e,t,c){"use strict";t.a=e=>`userdb-${(e=>e.split("").map(e=>e.charCodeAt(0).toString(16)).join(""))(e)}`},60:function(e,t){},90:function(e,t,c){"use strict";var n=c(0),a=c(43);function s(e){let t,c,a;return{c(){t=Object(n.z)("input"),this.h()},l(e){t=Object(n.n)(e,"INPUT",{class:!0,type:!0,name:!0,id:!0}),this.h()},h(){Object(n.h)(t,"class","input"),Object(n.h)(t,"type","text"),Object(n.h)(t,"name",e[2]),Object(n.h)(t,"id",e[2]),Object(n.db)(t,"is-danger",null!=e[5])},m(s,b){Object(n.J)(s,t,b),Object(n.Y)(t,e[0]),c||(a=Object(n.L)(t,"input",e[7]),c=!0)},p(e,c){4&c&&Object(n.h)(t,"name",e[2]),4&c&&Object(n.h)(t,"id",e[2]),1&c&&t.value!==e[0]&&Object(n.Y)(t,e[0]),32&c&&Object(n.db)(t,"is-danger",null!=e[5])},d(e){e&&Object(n.y)(t),c=!1,a()}}}function b(e){let t,c,a;return{c(){t=Object(n.z)("input"),this.h()},l(e){t=Object(n.n)(e,"INPUT",{class:!0,type:!0,name:!0,id:!0}),this.h()},h(){Object(n.h)(t,"class","input"),Object(n.h)(t,"type","password"),Object(n.h)(t,"name",e[2]),Object(n.h)(t,"id",e[2]),Object(n.db)(t,"is-danger",null!=e[5])},m(s,b){Object(n.J)(s,t,b),Object(n.Y)(t,e[0]),c||(a=Object(n.L)(t,"input",e[8]),c=!0)},p(e,c){4&c&&Object(n.h)(t,"name",e[2]),4&c&&Object(n.h)(t,"id",e[2]),1&c&&t.value!==e[0]&&Object(n.Y)(t,e[0]),32&c&&Object(n.db)(t,"is-danger",null!=e[5])},d(e){e&&Object(n.y)(t),c=!1,a()}}}function o(e){let t,c;return{c(){t=Object(n.z)("p"),c=Object(n.cb)(e[5]),this.h()},l(a){t=Object(n.n)(a,"P",{class:!0});var s=Object(n.l)(t);c=Object(n.p)(s,e[5]),s.forEach(n.y),this.h()},h(){Object(n.h)(t,"class","help is-danger")},m(e,a){Object(n.J)(e,t,a),Object(n.f)(t,c)},p(e,t){32&t&&Object(n.X)(c,e[5])},d(e){e&&Object(n.y)(t)}}}function i(e){let t,c,i,l,r,j,O,u,d,f,h="text"===e[4]&&s(e),p="password"===e[4]&&b(e);u=new a.a({props:{size:"small",icon:e[3],left:!0}});let m=null!=e[5]&&o(e);return{c(){t=Object(n.z)("div"),c=Object(n.z)("label"),i=Object(n.cb)(e[1]),l=Object(n.ab)(),r=Object(n.z)("div"),h&&h.c(),j=Object(n.ab)(),p&&p.c(),O=Object(n.ab)(),Object(n.s)(u.$$.fragment),d=Object(n.ab)(),m&&m.c(),this.h()},l(a){t=Object(n.n)(a,"DIV",{class:!0});var s=Object(n.l)(t);c=Object(n.n)(s,"LABEL",{class:!0,for:!0});var b=Object(n.l)(c);i=Object(n.p)(b,e[1]),b.forEach(n.y),l=Object(n.o)(s),r=Object(n.n)(s,"DIV",{class:!0});var o=Object(n.l)(r);h&&h.l(o),j=Object(n.o)(o),p&&p.l(o),O=Object(n.o)(o),Object(n.m)(u.$$.fragment,o),o.forEach(n.y),d=Object(n.o)(s),m&&m.l(s),s.forEach(n.y),this.h()},h(){Object(n.h)(c,"class","label"),Object(n.h)(c,"for",e[2]),Object(n.h)(r,"class","control has-icons-left"),Object(n.h)(t,"class","field")},m(e,a){Object(n.J)(e,t,a),Object(n.f)(t,c),Object(n.f)(c,i),Object(n.f)(t,l),Object(n.f)(t,r),h&&h.m(r,null),Object(n.f)(r,j),p&&p.m(r,null),Object(n.f)(r,O),Object(n.N)(u,r,null),Object(n.f)(t,d),m&&m.m(t,null),f=!0},p(e,[a]){(!f||2&a)&&Object(n.X)(i,e[1]),(!f||4&a)&&Object(n.h)(c,"for",e[2]),"text"===e[4]?h?h.p(e,a):(h=s(e),h.c(),h.m(r,j)):h&&(h.d(1),h=null),"password"===e[4]?p?p.p(e,a):(p=b(e),p.c(),p.m(r,O)):p&&(p.d(1),p=null);const l={};8&a&&(l.icon=e[3]),u.$set(l),null!=e[5]?m?m.p(e,a):(m=o(e),m.c(),m.m(t,null)):m&&(m.d(1),m=null)},i(e){f||(Object(n.eb)(u.$$.fragment,e),f=!0)},o(e){Object(n.fb)(u.$$.fragment,e),f=!1},d(e){e&&Object(n.y)(t),h&&h.d(),p&&p.d(),Object(n.w)(u),m&&m.d()}}}function l(e,t,c){let{name:n}=t,{id:a}=t,{icon:s}=t,{type:b="text"}=t,{value:o}=t,{formStatus:i={}}=t,l=null;return e.$$set=e=>{"name"in e&&c(1,n=e.name),"id"in e&&c(2,a=e.id),"icon"in e&&c(3,s=e.icon),"type"in e&&c(4,b=e.type),"value"in e&&c(0,o=e.value),"formStatus"in e&&c(6,i=e.formStatus)},e.$$.update=()=>{68&e.$$.dirty&&c(5,l=i[a])},[o,n,a,s,b,l,i,function(){o=this.value,c(0,o)},function(){o=this.value,c(0,o)}]}class r extends n.a{constructor(e){super(),Object(n.I)(this,e,l,i,n.V,{name:1,id:2,icon:3,type:4,value:0,formStatus:6})}}t.a=r}}]);