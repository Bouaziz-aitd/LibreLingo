(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{33:function(e,t,c){"use strict";(function(e){var n=c(52),a=c(38),s=c(34),b=c.n(s);let i,o,r;const O=t=>{const a=new(void 0!==e.env.JEST_WORKER_ID?c(28):c(28).default)(t).setMaxListeners(n.a.database.maxNumberOfListeners);return a.changes({since:"now",live:!0,include_docs:!0}).on("change",()=>{if(void 0!==e.env.JEST_WORKER_ID)return;c(30).default.update(e=>({...e,dbUpdatedAt:Date.now()}))}),a};{const e=c(30).default,t=c(28).default;o=new t(`${n.a.database.remote}/${b.a.get("loginDb")}`,{skip_setup:!0,live:!0}),i=O(n.a.database.local),window._DB=i,b.a.get("loginDb")===Object(a.a)("---fakeUser")&&e.update(e=>({...e,user:{name:"---fakeUser"},online:!0})),b.a.get("loginDb")&&n.a.features.authEnabled?fetch(`${n.a.database.remote}/_session`,{credentials:"include"}).then(e=>e.json()).then(t=>{null!==t.userCtx.name&&(e.update(e=>({...e,user:{name:t.userCtx.name}})),s())}):e.update(e=>({...e,online:!1})),window._fakeLogin=()=>{b.a.set("loginDb",Object(a.a)("---fakeUser"),{expires:n.a.database.auth.expireDays}),window.location.href="/course/spanish-from-english/"},window._Login=async(t,c)=>{if(!1===window._test_credentials_correct)throw new Error("Incorrect username or password");if(!0===window._test_credentials_correct)return window._fakeLogin();const s=await(await fetch(`${n.a.database.remote}/_session`,{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:c})})).json();if(s.error){if("unauthorized"===s.error)throw new Error("Username or password is incorrect");throw new Error("Couldn't log in. Please try again later")}e.update(e=>({...e,online:null})),b.a.set("loginDb",Object(a.a)(t),{expires:n.a.database.auth.expireDays}),window.location.reload(!1),window.location.href="/course/spanish-from-english/"},window._Logout=async()=>{try{r&&(await r.cancel(),await fetch(`${n.a.database.remote}/_session`,{method:"delete"}))}finally{b.a.remove("loginDb"),e.update(e=>({...e,user:null,online:null})),await i.destroy(),window.location.reload(!1)}};const s=()=>{r=i.sync(o).on("complete",(function(){e.update(e=>({...e,online:!0}))})).on("error",(function(){e.update(e=>({...e,online:!1}))}))}}void 0!==e.env.JEST_WORKER_ID&&(i=O(n.a.database.local),i.__reset=async()=>{const e=await i.allDocs();await Promise.all(e.rows.map((function(e){return i.remove(e.id,e.value.rev)})))}),t.a=i}).call(this,c(19))},353:function(e,t,c){"use strict";c.r(t);var n=c(0),a=(c(33),c(52)),s=c(32),b=c(27),i=c(90),o=c(5);function r(e){let t,c,a=e[3].license+"";return{c(){t=Object(n.A)("p"),c=Object(n.eb)(a),this.h()},l(e){t=Object(n.o)(e,"P",{class:!0});var s=Object(n.m)(t);c=Object(n.q)(s,a),s.forEach(n.z),this.h()},h(){Object(n.i)(t,"class","help is-danger")},m(e,a){Object(n.K)(e,t,a),Object(n.g)(t,c)},p(e,t){8&t&&a!==(a=e[3].license+"")&&Object(n.Z)(c,a)},d(e){e&&Object(n.z)(t)}}}function O(e){let t,c,a=e[3]._form+"";return{c(){t=Object(n.A)("p"),c=Object(n.eb)(a),this.h()},l(e){t=Object(n.o)(e,"P",{class:!0});var s=Object(n.m)(t);c=Object(n.q)(s,a),s.forEach(n.z),this.h()},h(){Object(n.i)(t,"class","help is-danger")},m(e,a){Object(n.K)(e,t,a),Object(n.g)(t,c)},p(e,t){8&t&&a!==(a=e[3]._form+"")&&Object(n.Z)(c,a)},d(e){e&&Object(n.z)(t)}}}function j(e){let t;return{c(){t=Object(n.eb)("Sign up")},l(e){t=Object(n.q)(e,"Sign up")},m(e,c){Object(n.K)(e,t,c)},d(e){e&&Object(n.z)(t)}}}function l(e){let t,c,a,o,l,u,d,m,p,f,h,g,$,w,v,y,_,E,z,x,A,k,S,D,P,L,I,T,U,K,q,C,J,N,R,M,V,G,W,Z;function B(t){e[9](t)}o=new s.a({props:{dark:!0}});let H={name:"Username",icon:"user",id:"username",formStatus:e[3]};function X(t){e[10](t)}void 0!==e[0]&&(H.value=e[0]),g=new i.a({props:H}),n.k.push(()=>Object(n.j)(g,"value",B));let Y={name:"Email",icon:"envelope",id:"email",formStatus:e[3]};function F(t){e[11](t)}void 0!==e[1]&&(Y.value=e[1]),v=new i.a({props:Y}),n.k.push(()=>Object(n.j)(v,"value",X));let Q={name:"Password",icon:"lock",id:"password",type:"password",formStatus:e[3]};function ee(t){e[12](t)}void 0!==e[2]&&(Q.value=e[2]),E=new i.a({props:Q}),n.k.push(()=>Object(n.j)(E,"value",F));let te={name:"Repeat password",icon:"lock",id:"password_confirmation",type:"password",formStatus:e[3]};void 0!==e[5]&&(te.value=e[5]),A=new i.a({props:te}),n.k.push(()=>Object(n.j)(A,"value",ee));let ce=null!=e[3].license&&r(e),ne=null!=e[3]._form&&O(e);return V=new b.a({props:{loading:e[4],asHref:"/sign-up-success",submit:!0,$$slots:{default:[j]},$$scope:{ctx:e}}}),V.$on("click",(function(){Object(n.L)(e[7])&&e[7].apply(this,arguments)})),{c(){t=Object(n.A)("meta"),a=Object(n.cb)(),Object(n.t)(o.$$.fragment),l=Object(n.cb)(),u=Object(n.A)("section"),d=Object(n.A)("div"),m=Object(n.A)("form"),p=Object(n.A)("h2"),f=Object(n.eb)("Sign up"),h=Object(n.cb)(),Object(n.t)(g.$$.fragment),w=Object(n.cb)(),Object(n.t)(v.$$.fragment),_=Object(n.cb)(),Object(n.t)(E.$$.fragment),x=Object(n.cb)(),Object(n.t)(A.$$.fragment),S=Object(n.cb)(),D=Object(n.A)("div"),P=Object(n.A)("div"),L=Object(n.A)("label"),I=Object(n.A)("input"),T=Object(n.eb)("\n            I agree to the\n            "),U=Object(n.A)("a"),K=Object(n.eb)("Terms and Conditions"),q=Object(n.eb)("\n            and the\n            "),C=Object(n.A)("a"),J=Object(n.eb)("GNU Affero General Public License"),N=Object(n.cb)(),ce&&ce.c(),R=Object(n.cb)(),ne&&ne.c(),M=Object(n.cb)(),Object(n.t)(V.$$.fragment),this.h()},l(e){const c=Object(n.V)('[data-svelte="svelte-14x6y23"]',document.head);t=Object(n.o)(c,"META",{name:!0,content:!0}),c.forEach(n.z),a=Object(n.p)(e),Object(n.n)(o.$$.fragment,e),l=Object(n.p)(e),u=Object(n.o)(e,"SECTION",{class:!0});var s=Object(n.m)(u);d=Object(n.o)(s,"DIV",{class:!0});var b=Object(n.m)(d);m=Object(n.o)(b,"FORM",{});var i=Object(n.m)(m);p=Object(n.o)(i,"H2",{class:!0});var r=Object(n.m)(p);f=Object(n.q)(r,"Sign up"),r.forEach(n.z),h=Object(n.p)(i),Object(n.n)(g.$$.fragment,i),w=Object(n.p)(i),Object(n.n)(v.$$.fragment,i),_=Object(n.p)(i),Object(n.n)(E.$$.fragment,i),x=Object(n.p)(i),Object(n.n)(A.$$.fragment,i),S=Object(n.p)(i),D=Object(n.o)(i,"DIV",{class:!0});var O=Object(n.m)(D);P=Object(n.o)(O,"DIV",{class:!0});var j=Object(n.m)(P);L=Object(n.o)(j,"LABEL",{class:!0});var $=Object(n.m)(L);I=Object(n.o)($,"INPUT",{type:!0,name:!0,id:!0}),T=Object(n.q)($,"\n            I agree to the\n            "),U=Object(n.o)($,"A",{href:!0});var y=Object(n.m)(U);K=Object(n.q)(y,"Terms and Conditions"),y.forEach(n.z),q=Object(n.q)($,"\n            and the\n            "),C=Object(n.o)($,"A",{href:!0});var z=Object(n.m)(C);J=Object(n.q)(z,"GNU Affero General Public License"),z.forEach(n.z),$.forEach(n.z),j.forEach(n.z),N=Object(n.p)(O),ce&&ce.l(O),O.forEach(n.z),R=Object(n.p)(i),ne&&ne.l(i),M=Object(n.p)(i),Object(n.n)(V.$$.fragment,i),i.forEach(n.z),b.forEach(n.z),s.forEach(n.z),this.h()},h(){document.title="Sign up - LibreLingo",Object(n.i)(t,"name","description"),Object(n.i)(t,"content",c=e[8]("sign-up.meta.description")),Object(n.i)(p,"class","is-size-2"),Object(n.i)(I,"type","checkbox"),Object(n.i)(I,"name","license"),Object(n.i)(I,"id","license"),Object(n.i)(U,"href","/tos"),Object(n.i)(C,"href","/license"),Object(n.i)(L,"class","checkbox"),Object(n.i)(P,"class","control"),Object(n.i)(D,"class","field"),Object(n.i)(d,"class","container"),Object(n.i)(u,"class","section")},m(c,s){Object(n.g)(document.head,t),Object(n.K)(c,a,s),Object(n.O)(o,c,s),Object(n.K)(c,l,s),Object(n.K)(c,u,s),Object(n.g)(u,d),Object(n.g)(d,m),Object(n.g)(m,p),Object(n.g)(p,f),Object(n.g)(m,h),Object(n.O)(g,m,null),Object(n.g)(m,w),Object(n.O)(v,m,null),Object(n.g)(m,_),Object(n.O)(E,m,null),Object(n.g)(m,x),Object(n.O)(A,m,null),Object(n.g)(m,S),Object(n.g)(m,D),Object(n.g)(D,P),Object(n.g)(P,L),Object(n.g)(L,I),I.checked=e[6],Object(n.g)(L,T),Object(n.g)(L,U),Object(n.g)(U,K),Object(n.g)(L,q),Object(n.g)(L,C),Object(n.g)(C,J),Object(n.g)(D,N),ce&&ce.m(D,null),Object(n.g)(m,R),ne&&ne.m(m,null),Object(n.g)(m,M),Object(n.O)(V,m,null),G=!0,W||(Z=[Object(n.M)(I,"change",e[13]),Object(n.M)(m,"submit",Object(n.U)((function(){Object(n.L)(e[7])&&e[7].apply(this,arguments)})))],W=!0)},p(a,[s]){e=a,(!G||256&s&&c!==(c=e[8]("sign-up.meta.description")))&&Object(n.i)(t,"content",c);const b={};8&s&&(b.formStatus=e[3]),!$&&1&s&&($=!0,b.value=e[0],Object(n.d)(()=>$=!1)),g.$set(b);const i={};8&s&&(i.formStatus=e[3]),!y&&2&s&&(y=!0,i.value=e[1],Object(n.d)(()=>y=!1)),v.$set(i);const o={};8&s&&(o.formStatus=e[3]),!z&&4&s&&(z=!0,o.value=e[2],Object(n.d)(()=>z=!1)),E.$set(o);const j={};8&s&&(j.formStatus=e[3]),!k&&32&s&&(k=!0,j.value=e[5],Object(n.d)(()=>k=!1)),A.$set(j),64&s&&(I.checked=e[6]),null!=e[3].license?ce?ce.p(e,s):(ce=r(e),ce.c(),ce.m(D,null)):ce&&(ce.d(1),ce=null),null!=e[3]._form?ne?ne.p(e,s):(ne=O(e),ne.c(),ne.m(m,M)):ne&&(ne.d(1),ne=null);const l={};16&s&&(l.loading=e[4]),524288&s&&(l.$$scope={dirty:s,ctx:e}),V.$set(l)},i(e){G||(Object(n.gb)(o.$$.fragment,e),Object(n.gb)(g.$$.fragment,e),Object(n.gb)(v.$$.fragment,e),Object(n.gb)(E.$$.fragment,e),Object(n.gb)(A.$$.fragment,e),Object(n.gb)(V.$$.fragment,e),G=!0)},o(e){Object(n.hb)(o.$$.fragment,e),Object(n.hb)(g.$$.fragment,e),Object(n.hb)(v.$$.fragment,e),Object(n.hb)(E.$$.fragment,e),Object(n.hb)(A.$$.fragment,e),Object(n.hb)(V.$$.fragment,e),G=!1},d(e){Object(n.z)(t),e&&Object(n.z)(a),Object(n.x)(o,e),e&&Object(n.z)(l),e&&Object(n.z)(u),Object(n.x)(g),Object(n.x)(v),Object(n.x)(E),Object(n.x)(A),ce&&ce.d(),ne&&ne.d(),Object(n.x)(V),W=!1,Object(n.W)(Z)}}}const u=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;function d(e,t,c){let s;Object(n.r)(e,o.a,e=>c(8,s=e));let b=!1,i="",r="",O="",j="",l=!1,d={};let m;return e.$$.update=()=>{15&e.$$.dirty&&c(7,m=async()=>{c(4,b=!0),c(3,d={}),i?i.length<4&&c(3,d=Object.assign(Object.assign({},d),{username:"Please choose a username that has at least 4 characters"})):c(3,d=Object.assign(Object.assign({},d),{username:"Please choose a username"})),r?u.test(r)||c(3,d=Object.assign(Object.assign({},d),{email:"This does not look like a valid email address"})):c(3,d=Object.assign(Object.assign({},d),{email:"Please tell us your email address"})),O?O.length<6?c(3,d=Object.assign(Object.assign({},d),{password:"Your password is too short. Please choose a password that's at least 5 characters long."})):j?O===j||c(3,d=Object.assign(Object.assign({},d),{password_confirmation:"The passwords don't match"})):c(3,d=Object.assign(Object.assign({},d),{password_confirmation:"Please verify your chosen password by repeating it"})):c(3,d=Object.assign(Object.assign({},d),{password:"Please choose a password"})),l?i.length<4&&c(3,d=Object.assign(Object.assign({},d),{username:"Please choose a username that has at least 4 characters"})):c(3,d=Object.assign(Object.assign({},d),{license:"You have to accept the agreements."})),window._test_fake_signup&&window._test_user_already_exists&&c(3,d=Object.assign(Object.assign({},d),{_form:"User already exists. Please choose another username."}));const e=0===Object.keys(d).length;window._test_fake_signup?setTimeout((function(){!0===e?(c(4,b=!1),window.location="/sign-up-success"):c(4,b=!1)}),500):e?fetch(a.a.database.signUpEndpoint,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,email:r,password:O})}).then(e=>e.json()).then(({success:e,error:t})=>{e?(c(4,b=!1),window.location="/sign-up-success"):(c(4,b=!1),"invalid-payload"===t.code?c(3,d=t.details):c(3,d={_form:"Server error"}))}):c(4,b=!1)})},[i,r,O,d,b,j,l,m,s,function(e){i=e,c(0,i)},function(e){r=e,c(1,r)},function(e){O=e,c(2,O)},function(e){j=e,c(5,j)},function(){l=this.checked,c(6,l)}]}class m extends n.b{constructor(e){super(),Object(n.J)(this,e,d,l,n.X,{})}}t.default=m},38:function(e,t,c){"use strict";t.a=e=>`userdb-${(e=>e.split("").map(e=>e.charCodeAt(0).toString(16)).join(""))(e)}`},61:function(e,t){},90:function(e,t,c){"use strict";var n=c(0),a=c(39);function s(e){let t,c,a;return{c(){t=Object(n.A)("input"),this.h()},l(e){t=Object(n.o)(e,"INPUT",{class:!0,type:!0,name:!0,id:!0}),this.h()},h(){Object(n.i)(t,"class","input"),Object(n.i)(t,"type","text"),Object(n.i)(t,"name",e[2]),Object(n.i)(t,"id",e[2]),Object(n.fb)(t,"is-danger",null!=e[5])},m(s,b){Object(n.K)(s,t,b),Object(n.ab)(t,e[0]),c||(a=Object(n.M)(t,"input",e[7]),c=!0)},p(e,c){4&c&&Object(n.i)(t,"name",e[2]),4&c&&Object(n.i)(t,"id",e[2]),1&c&&t.value!==e[0]&&Object(n.ab)(t,e[0]),32&c&&Object(n.fb)(t,"is-danger",null!=e[5])},d(e){e&&Object(n.z)(t),c=!1,a()}}}function b(e){let t,c,a;return{c(){t=Object(n.A)("input"),this.h()},l(e){t=Object(n.o)(e,"INPUT",{class:!0,type:!0,name:!0,id:!0}),this.h()},h(){Object(n.i)(t,"class","input"),Object(n.i)(t,"type","password"),Object(n.i)(t,"name",e[2]),Object(n.i)(t,"id",e[2]),Object(n.fb)(t,"is-danger",null!=e[5])},m(s,b){Object(n.K)(s,t,b),Object(n.ab)(t,e[0]),c||(a=Object(n.M)(t,"input",e[8]),c=!0)},p(e,c){4&c&&Object(n.i)(t,"name",e[2]),4&c&&Object(n.i)(t,"id",e[2]),1&c&&t.value!==e[0]&&Object(n.ab)(t,e[0]),32&c&&Object(n.fb)(t,"is-danger",null!=e[5])},d(e){e&&Object(n.z)(t),c=!1,a()}}}function i(e){let t,c;return{c(){t=Object(n.A)("p"),c=Object(n.eb)(e[5]),this.h()},l(a){t=Object(n.o)(a,"P",{class:!0});var s=Object(n.m)(t);c=Object(n.q)(s,e[5]),s.forEach(n.z),this.h()},h(){Object(n.i)(t,"class","help is-danger")},m(e,a){Object(n.K)(e,t,a),Object(n.g)(t,c)},p(e,t){32&t&&Object(n.Z)(c,e[5])},d(e){e&&Object(n.z)(t)}}}function o(e){let t,c,o,r,O,j,l,u,d,m,p="text"===e[4]&&s(e),f="password"===e[4]&&b(e);u=new a.a({props:{size:"small",icon:e[3],left:!0}});let h=null!=e[5]&&i(e);return{c(){t=Object(n.A)("div"),c=Object(n.A)("label"),o=Object(n.eb)(e[1]),r=Object(n.cb)(),O=Object(n.A)("div"),p&&p.c(),j=Object(n.cb)(),f&&f.c(),l=Object(n.cb)(),Object(n.t)(u.$$.fragment),d=Object(n.cb)(),h&&h.c(),this.h()},l(a){t=Object(n.o)(a,"DIV",{class:!0});var s=Object(n.m)(t);c=Object(n.o)(s,"LABEL",{class:!0,for:!0});var b=Object(n.m)(c);o=Object(n.q)(b,e[1]),b.forEach(n.z),r=Object(n.p)(s),O=Object(n.o)(s,"DIV",{class:!0});var i=Object(n.m)(O);p&&p.l(i),j=Object(n.p)(i),f&&f.l(i),l=Object(n.p)(i),Object(n.n)(u.$$.fragment,i),i.forEach(n.z),d=Object(n.p)(s),h&&h.l(s),s.forEach(n.z),this.h()},h(){Object(n.i)(c,"class","label"),Object(n.i)(c,"for",e[2]),Object(n.i)(O,"class","control has-icons-left"),Object(n.i)(t,"class","field")},m(e,a){Object(n.K)(e,t,a),Object(n.g)(t,c),Object(n.g)(c,o),Object(n.g)(t,r),Object(n.g)(t,O),p&&p.m(O,null),Object(n.g)(O,j),f&&f.m(O,null),Object(n.g)(O,l),Object(n.O)(u,O,null),Object(n.g)(t,d),h&&h.m(t,null),m=!0},p(e,[a]){(!m||2&a)&&Object(n.Z)(o,e[1]),(!m||4&a)&&Object(n.i)(c,"for",e[2]),"text"===e[4]?p?p.p(e,a):(p=s(e),p.c(),p.m(O,j)):p&&(p.d(1),p=null),"password"===e[4]?f?f.p(e,a):(f=b(e),f.c(),f.m(O,l)):f&&(f.d(1),f=null);const r={};8&a&&(r.icon=e[3]),u.$set(r),null!=e[5]?h?h.p(e,a):(h=i(e),h.c(),h.m(t,null)):h&&(h.d(1),h=null)},i(e){m||(Object(n.gb)(u.$$.fragment,e),m=!0)},o(e){Object(n.hb)(u.$$.fragment,e),m=!1},d(e){e&&Object(n.z)(t),p&&p.d(),f&&f.d(),Object(n.x)(u),h&&h.d()}}}function r(e,t,c){let{name:n}=t,{id:a}=t,{icon:s}=t,{type:b="text"}=t,{value:i}=t,{formStatus:o={}}=t,r=null;return e.$$set=e=>{"name"in e&&c(1,n=e.name),"id"in e&&c(2,a=e.id),"icon"in e&&c(3,s=e.icon),"type"in e&&c(4,b=e.type),"value"in e&&c(0,i=e.value),"formStatus"in e&&c(6,o=e.formStatus)},e.$$.update=()=>{68&e.$$.dirty&&c(5,r=o[a])},[i,n,a,s,b,r,o,function(){i=this.value,c(0,i)},function(){i=this.value,c(0,i)}]}class O extends n.b{constructor(e){super(),Object(n.J)(this,e,r,o,n.X,{name:1,id:2,icon:3,type:4,value:0,formStatus:6})}}t.a=O}}]);