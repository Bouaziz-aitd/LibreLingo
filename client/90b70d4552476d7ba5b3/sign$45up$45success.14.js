(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{35:function(e,t,a){"use strict";(function(e){var n=a(47),c=a(37),o=a(36),s=a(8);let r,i,b;const l=t=>{const c=new(void 0!==e.env.JEST_WORKER_ID?a(28):a(28).default)(t).setMaxListeners(n.a.database.maxNumberOfListeners);return c.changes({since:"now",live:!0,include_docs:!0}).on("change",()=>{if(void 0!==e.env.JEST_WORKER_ID)return;a(30).default.update(e=>({...e,dbUpdatedAt:Date.now()}))}),c};if(!0===Object(s.a)()){const e=a(30).default,t=a(28).default;i=new t(`${n.a.database.remote}/${o.a.get("loginDb")}`,{skip_setup:!0,live:!0}),r=l(n.a.database.local),window._DB=r,o.a.get("loginDb")===Object(c.a)("---fakeUser")&&e.update(e=>({...e,user:{name:"---fakeUser"},online:!0})),o.a.get("loginDb")&&n.a.features.authEnabled?fetch(n.a.database.remote+"/_session",{credentials:"include"}).then(e=>e.json()).then(t=>{null!==t.userCtx.name&&(e.update(e=>({...e,user:{name:t.userCtx.name}})),s())}):e.update(e=>({...e,online:!1})),window._fakeLogin=()=>{o.a.set("loginDb",Object(c.a)("---fakeUser"),{expires:n.a.database.auth.expireDays}),window.location.href="/course/spanish-from-english/"},window._Login=async(t,a)=>{if(!1===window._test_credentials_correct)throw new Error("Incorrect username or password");if(!0===window._test_credentials_correct)return window._fakeLogin();const s=await(await fetch(n.a.database.remote+"/_session",{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a})})).json();if(s.error){if("unauthorized"===s.error)throw new Error("Username or password is incorrect");throw new Error("Couldn't log in. Please try again later")}e.update(e=>({...e,online:null})),o.a.set("loginDb",Object(c.a)(t),{expires:n.a.database.auth.expireDays}),window.location.reload(!1),window.location.href="/course/spanish-from-english/"},window._Logout=async()=>{try{b&&(await b.cancel(),await fetch(n.a.database.remote+"/_session",{method:"delete"}))}finally{o.a.remove("loginDb"),e.update(e=>({...e,user:null,online:null})),await r.destroy(),window.location.reload(!1)}};const s=()=>{b=r.sync(i).on("complete",(function(){e.update(e=>({...e,online:!0}))})).on("error",(function(){e.update(e=>({...e,online:!1}))}))}}void 0!==e.env.JEST_WORKER_ID&&(r=l(n.a.database.local),r.__reset=async()=>{const e=await r.allDocs();await Promise.all(e.rows.map((function(e){return r.remove(e.id,e.value.rev)})))}),t.a=r}).call(this,a(20))},37:function(e,t,a){"use strict";t.a=e=>"userdb-"+(e=>e.split("").map(e=>e.charCodeAt(0).toString(16)).join(""))(e)},431:function(e,t,a){"use strict";a.r(t);var n=a(0),c=(a(35),a(33)),o=a(34);function s(e){let t;return{c(){t=Object(n.hb)("Log in")},l(e){t=Object(n.s)(e,"Log in")},m(e,a){Object(n.M)(e,t,a)},d(e){e&&Object(n.B)(t)}}}function r(e){let t,a,r,i,b,l,d,u,j,O,f,w;return t=new c.a({}),f=new o.a({props:{href:"/login",$$slots:{default:[s]},$$scope:{ctx:e}}}),{c(){Object(n.v)(t.$$.fragment),a=Object(n.eb)(),r=Object(n.C)("section"),i=Object(n.C)("div"),b=Object(n.C)("h2"),l=Object(n.hb)("Registration successful!"),d=Object(n.eb)(),u=Object(n.C)("p"),j=Object(n.hb)("You can now log in."),O=Object(n.eb)(),Object(n.v)(f.$$.fragment),this.h()},l(e){Object(n.o)(t.$$.fragment,e),a=Object(n.r)(e),r=Object(n.p)(e,"SECTION",{class:!0});var c=Object(n.n)(r);i=Object(n.p)(c,"DIV",{class:!0});var o=Object(n.n)(i);b=Object(n.p)(o,"H2",{class:!0});var s=Object(n.n)(b);l=Object(n.s)(s,"Registration successful!"),s.forEach(n.B),d=Object(n.r)(o),u=Object(n.p)(o,"P",{});var w=Object(n.n)(u);j=Object(n.s)(w,"You can now log in."),w.forEach(n.B),O=Object(n.r)(o),Object(n.o)(f.$$.fragment,o),o.forEach(n.B),c.forEach(n.B),this.h()},h(){Object(n.j)(b,"class","is-size-2"),Object(n.j)(i,"class","container"),Object(n.j)(r,"class","section")},m(e,c){Object(n.Q)(t,e,c),Object(n.M)(e,a,c),Object(n.M)(e,r,c),Object(n.g)(r,i),Object(n.g)(i,b),Object(n.g)(b,l),Object(n.g)(i,d),Object(n.g)(i,u),Object(n.g)(u,j),Object(n.g)(i,O),Object(n.Q)(f,i,null),w=!0},p(e,[t]){const a={};1&t&&(a.$$scope={dirty:t,ctx:e}),f.$set(a)},i(e){w||(Object(n.jb)(t.$$.fragment,e),Object(n.jb)(f.$$.fragment,e),w=!0)},o(e){Object(n.kb)(t.$$.fragment,e),Object(n.kb)(f.$$.fragment,e),w=!1},d(e){Object(n.z)(t,e),e&&Object(n.B)(a),e&&Object(n.B)(r),Object(n.z)(f)}}}class i extends n.b{constructor(e){super(),Object(n.L)(this,e,null,r,n.Z,{})}}t.default=i},61:function(e,t){}}]);