(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{35:function(e,t,a){"use strict";(function(e){var n=a(47),o=a(37),c=a(36),s=a.n(c),r=a(8);let i,b,l;const d=t=>{const o=new(void 0!==e.env.JEST_WORKER_ID?a(28):a(28).default)(t).setMaxListeners(n.a.database.maxNumberOfListeners);return o.changes({since:"now",live:!0,include_docs:!0}).on("change",()=>{if(void 0!==e.env.JEST_WORKER_ID)return;a(30).default.update(e=>({...e,dbUpdatedAt:Date.now()}))}),o};if(!0===Object(r.a)()){const e=a(30).default,t=a(28).default;b=new t(`${n.a.database.remote}/${s.a.get("loginDb")}`,{skip_setup:!0,live:!0}),i=d(n.a.database.local),window._DB=i,s.a.get("loginDb")===Object(o.a)("---fakeUser")&&e.update(e=>({...e,user:{name:"---fakeUser"},online:!0})),s.a.get("loginDb")&&n.a.features.authEnabled?fetch(n.a.database.remote+"/_session",{credentials:"include"}).then(e=>e.json()).then(t=>{null!==t.userCtx.name&&(e.update(e=>({...e,user:{name:t.userCtx.name}})),c())}):e.update(e=>({...e,online:!1})),window._fakeLogin=()=>{s.a.set("loginDb",Object(o.a)("---fakeUser"),{expires:n.a.database.auth.expireDays}),window.location.href="/course/spanish-from-english/"},window._Login=async(t,a)=>{if(!1===window._test_credentials_correct)throw new Error("Incorrect username or password");if(!0===window._test_credentials_correct)return window._fakeLogin();const c=await(await fetch(n.a.database.remote+"/_session",{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a})})).json();if(c.error){if("unauthorized"===c.error)throw new Error("Username or password is incorrect");throw new Error("Couldn't log in. Please try again later")}e.update(e=>({...e,online:null})),s.a.set("loginDb",Object(o.a)(t),{expires:n.a.database.auth.expireDays}),window.location.reload(!1),window.location.href="/course/spanish-from-english/"},window._Logout=async()=>{try{l&&(await l.cancel(),await fetch(n.a.database.remote+"/_session",{method:"delete"}))}finally{s.a.remove("loginDb"),e.update(e=>({...e,user:null,online:null})),await i.destroy(),window.location.reload(!1)}};const c=()=>{l=i.sync(b).on("complete",(function(){e.update(e=>({...e,online:!0}))})).on("error",(function(){e.update(e=>({...e,online:!1}))}))}}void 0!==e.env.JEST_WORKER_ID&&(i=d(n.a.database.local),i.__reset=async()=>{const e=await i.allDocs();await Promise.all(e.rows.map((function(e){return i.remove(e.id,e.value.rev)})))}),t.a=i}).call(this,a(20))},37:function(e,t,a){"use strict";t.a=e=>"userdb-"+(e=>e.split("").map(e=>e.charCodeAt(0).toString(16)).join(""))(e)},437:function(e,t,a){"use strict";a.r(t);var n=a(0),o=(a(35),a(33)),c=a(34);function s(e){let t;return{c(){t=Object(n.db)("Log in")},l(e){t=Object(n.r)(e,"Log in")},m(e,a){Object(n.J)(e,t,a)},d(e){e&&Object(n.A)(t)}}}function r(e){let t,a,r,i,b,l,d,u,O,j,f,w;return t=new o.a({}),f=new c.a({props:{href:"/login",$$slots:{default:[s]},$$scope:{ctx:e}}}),{c(){Object(n.u)(t.$$.fragment),a=Object(n.bb)(),r=Object(n.B)("section"),i=Object(n.B)("div"),b=Object(n.B)("h2"),l=Object(n.db)("Registration successful!"),d=Object(n.bb)(),u=Object(n.B)("p"),O=Object(n.db)("You can now log in."),j=Object(n.bb)(),Object(n.u)(f.$$.fragment),this.h()},l(e){Object(n.n)(t.$$.fragment,e),a=Object(n.q)(e),r=Object(n.o)(e,"SECTION",{class:!0});var o=Object(n.m)(r);i=Object(n.o)(o,"DIV",{class:!0});var c=Object(n.m)(i);b=Object(n.o)(c,"H2",{class:!0});var s=Object(n.m)(b);l=Object(n.r)(s,"Registration successful!"),s.forEach(n.A),d=Object(n.q)(c),u=Object(n.o)(c,"P",{});var w=Object(n.m)(u);O=Object(n.r)(w,"You can now log in."),w.forEach(n.A),j=Object(n.q)(c),Object(n.n)(f.$$.fragment,c),c.forEach(n.A),o.forEach(n.A),this.h()},h(){Object(n.i)(b,"class","is-size-2"),Object(n.i)(i,"class","container"),Object(n.i)(r,"class","section")},m(e,o){Object(n.N)(t,e,o),Object(n.J)(e,a,o),Object(n.J)(e,r,o),Object(n.g)(r,i),Object(n.g)(i,b),Object(n.g)(b,l),Object(n.g)(i,d),Object(n.g)(i,u),Object(n.g)(u,O),Object(n.g)(i,j),Object(n.N)(f,i,null),w=!0},p(e,[t]){const a={};1&t&&(a.$$scope={dirty:t,ctx:e}),f.$set(a)},i(e){w||(Object(n.fb)(t.$$.fragment,e),Object(n.fb)(f.$$.fragment,e),w=!0)},o(e){Object(n.gb)(t.$$.fragment,e),Object(n.gb)(f.$$.fragment,e),w=!1},d(e){Object(n.y)(t,e),e&&Object(n.A)(a),e&&Object(n.A)(r),Object(n.y)(f)}}}class i extends n.b{constructor(e){super(),Object(n.I)(this,e,null,r,n.W,{})}}t.default=i},64:function(e,t){}}]);