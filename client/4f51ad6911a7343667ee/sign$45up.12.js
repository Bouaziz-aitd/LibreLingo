(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{400:function(e,t,c){"use strict";c.r(t);var a=c(0),n=(c(50),c(32)),s=c(56),b=c(45),o=c(94);function l(e){let t,c,n=e[6].license+"";return{c(){t=Object(a.A)("p"),c=Object(a.eb)(n),this.h()},l(e){t=Object(a.n)(e,"P",{class:!0});var s=Object(a.l)(t);c=Object(a.p)(s,n),s.forEach(a.z),this.h()},h(){Object(a.h)(t,"class","help is-danger")},m(e,n){Object(a.K)(e,t,n),Object(a.f)(t,c)},p(e,t){64&t&&n!==(n=e[6].license+"")&&Object(a.Z)(c,n)},d(e){e&&Object(a.z)(t)}}}function r(e){let t,c,n=e[6]._form+"";return{c(){t=Object(a.A)("p"),c=Object(a.eb)(n),this.h()},l(e){t=Object(a.n)(e,"P",{class:!0});var s=Object(a.l)(t);c=Object(a.p)(s,n),s.forEach(a.z),this.h()},h(){Object(a.h)(t,"class","help is-danger")},m(e,n){Object(a.K)(e,t,n),Object(a.f)(t,c)},p(e,t){64&t&&n!==(n=e[6]._form+"")&&Object(a.Z)(c,n)},d(e){e&&Object(a.z)(t)}}}function i(e){let t;return{c(){t=Object(a.eb)("Sign up")},l(e){t=Object(a.p)(e,"Sign up")},m(e,c){Object(a.K)(e,t,c)},d(e){e&&Object(a.z)(t)}}}function O(e){let t,c,n,O,j,u,f,h,d,p,m,w,g,$,v,y,_,z,x,E,A,S,k,P,D,L,I,U,T,K,C,N,J,M,V,G,R,Z;function B(t){e[8].call(null,t)}c=new s.a({props:{dark:!0}});let H={name:"Username",icon:"user",id:"username",formStatus:e[6]};function W(t){e[9].call(null,t)}void 0!==e[1]&&(H.value=e[1]),p=new o.a({props:H}),a.j.push(()=>Object(a.i)(p,"value",B));let X={name:"Email",icon:"envelope",id:"email",formStatus:e[6]};function Y(t){e[10].call(null,t)}void 0!==e[2]&&(X.value=e[2]),g=new o.a({props:X}),a.j.push(()=>Object(a.i)(g,"value",W));let F={name:"Password",icon:"lock",id:"password",type:"password",formStatus:e[6]};function q(t){e[11].call(null,t)}void 0!==e[3]&&(F.value=e[3]),y=new o.a({props:F}),a.j.push(()=>Object(a.i)(y,"value",Y));let Q={name:"Repeat password",icon:"lock",id:"password_confirmation",type:"password",formStatus:e[6]};void 0!==e[4]&&(Q.value=e[4]),x=new o.a({props:Q}),a.j.push(()=>Object(a.i)(x,"value",q));let ee=null!=e[6].license&&l(e),te=null!=e[6]._form&&r(e);return V=new b.a({props:{loading:e[0],asHref:"/sign-up-success",submit:!0,$$slots:{default:[i]},$$scope:{ctx:e}}}),V.$on("click",(function(){Object(a.L)(e[7])&&e[7].apply(this,arguments)})),{c(){t=Object(a.cb)(),Object(a.t)(c.$$.fragment),n=Object(a.cb)(),O=Object(a.A)("section"),j=Object(a.A)("div"),u=Object(a.A)("form"),f=Object(a.A)("h2"),h=Object(a.eb)("Sign up"),d=Object(a.cb)(),Object(a.t)(p.$$.fragment),w=Object(a.cb)(),Object(a.t)(g.$$.fragment),v=Object(a.cb)(),Object(a.t)(y.$$.fragment),z=Object(a.cb)(),Object(a.t)(x.$$.fragment),A=Object(a.cb)(),S=Object(a.A)("div"),k=Object(a.A)("div"),P=Object(a.A)("label"),D=Object(a.A)("input"),L=Object(a.eb)("\n            I agree to the\n            "),I=Object(a.A)("a"),U=Object(a.eb)("Terms and Conditions"),T=Object(a.eb)("\n            and the\n            "),K=Object(a.A)("a"),C=Object(a.eb)("GNU Affero General Public License"),N=Object(a.cb)(),ee&&ee.c(),J=Object(a.cb)(),te&&te.c(),M=Object(a.cb)(),Object(a.t)(V.$$.fragment),this.h()},l(e){Object(a.V)('[data-svelte="svelte-1n7oua1"]',document.head).forEach(a.z),t=Object(a.o)(e),Object(a.m)(c.$$.fragment,e),n=Object(a.o)(e),O=Object(a.n)(e,"SECTION",{class:!0});var s=Object(a.l)(O);j=Object(a.n)(s,"DIV",{class:!0});var b=Object(a.l)(j);u=Object(a.n)(b,"FORM",{});var o=Object(a.l)(u);f=Object(a.n)(o,"H2",{class:!0});var l=Object(a.l)(f);h=Object(a.p)(l,"Sign up"),l.forEach(a.z),d=Object(a.o)(o),Object(a.m)(p.$$.fragment,o),w=Object(a.o)(o),Object(a.m)(g.$$.fragment,o),v=Object(a.o)(o),Object(a.m)(y.$$.fragment,o),z=Object(a.o)(o),Object(a.m)(x.$$.fragment,o),A=Object(a.o)(o),S=Object(a.n)(o,"DIV",{class:!0});var r=Object(a.l)(S);k=Object(a.n)(r,"DIV",{class:!0});var i=Object(a.l)(k);P=Object(a.n)(i,"LABEL",{class:!0});var m=Object(a.l)(P);D=Object(a.n)(m,"INPUT",{type:!0,name:!0,id:!0}),L=Object(a.p)(m,"\n            I agree to the\n            "),I=Object(a.n)(m,"A",{href:!0});var $=Object(a.l)(I);U=Object(a.p)($,"Terms and Conditions"),$.forEach(a.z),T=Object(a.p)(m,"\n            and the\n            "),K=Object(a.n)(m,"A",{href:!0});var _=Object(a.l)(K);C=Object(a.p)(_,"GNU Affero General Public License"),_.forEach(a.z),m.forEach(a.z),i.forEach(a.z),N=Object(a.o)(r),ee&&ee.l(r),r.forEach(a.z),J=Object(a.o)(o),te&&te.l(o),M=Object(a.o)(o),Object(a.m)(V.$$.fragment,o),o.forEach(a.z),b.forEach(a.z),s.forEach(a.z),this.h()},h(){document.title="Sign up - LibreLingo",Object(a.h)(f,"class","is-size-2"),Object(a.h)(D,"type","checkbox"),Object(a.h)(D,"name","license"),Object(a.h)(D,"id","license"),Object(a.h)(I,"href","/tos"),Object(a.h)(K,"href","/license"),Object(a.h)(P,"class","checkbox"),Object(a.h)(k,"class","control"),Object(a.h)(S,"class","field"),Object(a.h)(j,"class","container"),Object(a.h)(O,"class","section")},m(s,b){Object(a.K)(s,t,b),Object(a.O)(c,s,b),Object(a.K)(s,n,b),Object(a.K)(s,O,b),Object(a.f)(O,j),Object(a.f)(j,u),Object(a.f)(u,f),Object(a.f)(f,h),Object(a.f)(u,d),Object(a.O)(p,u,null),Object(a.f)(u,w),Object(a.O)(g,u,null),Object(a.f)(u,v),Object(a.O)(y,u,null),Object(a.f)(u,z),Object(a.O)(x,u,null),Object(a.f)(u,A),Object(a.f)(u,S),Object(a.f)(S,k),Object(a.f)(k,P),Object(a.f)(P,D),D.checked=e[5],Object(a.f)(P,L),Object(a.f)(P,I),Object(a.f)(I,U),Object(a.f)(P,T),Object(a.f)(P,K),Object(a.f)(K,C),Object(a.f)(S,N),ee&&ee.m(S,null),Object(a.f)(u,J),te&&te.m(u,null),Object(a.f)(u,M),Object(a.O)(V,u,null),G=!0,R||(Z=[Object(a.M)(D,"change",e[12]),Object(a.M)(u,"submit",Object(a.U)((function(){Object(a.L)(e[7])&&e[7].apply(this,arguments)})))],R=!0)},p(t,[c]){e=t;const n={};64&c&&(n.formStatus=e[6]),!m&&2&c&&(m=!0,n.value=e[1],Object(a.c)(()=>m=!1)),p.$set(n);const s={};64&c&&(s.formStatus=e[6]),!$&&4&c&&($=!0,s.value=e[2],Object(a.c)(()=>$=!1)),g.$set(s);const b={};64&c&&(b.formStatus=e[6]),!_&&8&c&&(_=!0,b.value=e[3],Object(a.c)(()=>_=!1)),y.$set(b);const o={};64&c&&(o.formStatus=e[6]),!E&&16&c&&(E=!0,o.value=e[4],Object(a.c)(()=>E=!1)),x.$set(o),32&c&&(D.checked=e[5]),null!=e[6].license?ee?ee.p(e,c):(ee=l(e),ee.c(),ee.m(S,null)):ee&&(ee.d(1),ee=null),null!=e[6]._form?te?te.p(e,c):(te=r(e),te.c(),te.m(u,M)):te&&(te.d(1),te=null);const i={};1&c&&(i.loading=e[0]),262144&c&&(i.$$scope={dirty:c,ctx:e}),V.$set(i)},i(e){G||(Object(a.gb)(c.$$.fragment,e),Object(a.gb)(p.$$.fragment,e),Object(a.gb)(g.$$.fragment,e),Object(a.gb)(y.$$.fragment,e),Object(a.gb)(x.$$.fragment,e),Object(a.gb)(V.$$.fragment,e),G=!0)},o(e){Object(a.hb)(c.$$.fragment,e),Object(a.hb)(p.$$.fragment,e),Object(a.hb)(g.$$.fragment,e),Object(a.hb)(y.$$.fragment,e),Object(a.hb)(x.$$.fragment,e),Object(a.hb)(V.$$.fragment,e),G=!1},d(e){e&&Object(a.z)(t),Object(a.x)(c,e),e&&Object(a.z)(n),e&&Object(a.z)(O),Object(a.x)(p),Object(a.x)(g),Object(a.x)(y),Object(a.x)(x),ee&&ee.d(),te&&te.d(),Object(a.x)(V),R=!1,Object(a.W)(Z)}}}const j=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;function u(e,t,c){let a=!1,s="",b="",o="",l="",r=!1,i={};let O;return e.$$.update=()=>{78&e.$$.dirty&&c(7,O=async()=>{c(0,a=!0),c(6,i={}),s?s.length<4&&c(6,i={...i,username:"Please choose a username that has at least 4 characters"}):c(6,i={...i,username:"Please choose a username"}),b?j.test(b)||c(6,i={...i,email:"This does not look like a valid email address"}):c(6,i={...i,email:"Please tell us your email address"}),o?o.length<6?c(6,i={...i,password:"Your password is too short. Please choose a password that's at least 5 characters long."}):l?o===l||c(6,i={...i,password_confirmation:"The passwords don't match"}):c(6,i={...i,password_confirmation:"Please verify your chosen password by repeating it"}):c(6,i={...i,password:"Please choose a password"}),r?s.length<4&&c(6,i={...i,username:"Please choose a username that has at least 4 characters"}):c(6,i={...i,license:"You have to accept the agreements."}),window._test_fake_signup&&window._test_user_already_exists&&c(6,i={...i,_form:"User already exists. Please choose another username."});const e=0===Object.keys(i).length;window._test_fake_signup?setTimeout((function(){!0===e?(c(0,a=!1),window.location="/sign-up-success"):c(0,a=!1)}),500):e?fetch(n.a.database.signUpEndpoint,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,email:b,password:o})}).then(e=>e.json()).then(({success:e,error:t})=>{e?(c(0,a=!1),window.location="/sign-up-success"):(c(0,a=!1),"invalid-payload"===t.code?c(6,i=t.details):c(6,i={_form:"Server error"}))}):c(0,a=!1)})},[a,s,b,o,l,r,i,O,function(e){s=e,c(1,s)},function(e){b=e,c(2,b)},function(e){o=e,c(3,o)},function(e){l=e,c(4,l)},function(){r=this.checked,c(5,r)}]}class f extends a.a{constructor(e){super(),Object(a.J)(this,e,u,O,a.X,{})}}t.default=f},50:function(e,t,c){"use strict";(function(e){var a=c(32),n=c(54),s=c(8),b=c.n(s);let o,l,r;{const e=c(33).default,t=c(51).default;l=new t(`${a.a.database.remote}/${b.a.get("loginDb")}`,{skip_setup:!0,live:!0}),o=new t(a.a.database.local).setMaxListeners(a.a.database.maxNumberOfListeners),window._DB=o,b.a.get("loginDb")===Object(n.a)("---fakeUser")&&e.update(e=>({...e,user:{name:"---fakeUser"},online:!0})),b.a.get("loginDb")&&a.a.features.authEnabled?fetch(`${a.a.database.remote}/_session`,{credentials:"include"}).then(e=>e.json()).then(t=>{null!==t.userCtx.name&&(e.update(e=>({...e,user:{name:t.userCtx.name}})),s())}):e.update(e=>({...e,online:!1})),window._fakeLogin=()=>{b.a.set("loginDb",Object(n.a)("---fakeUser"),{expires:a.a.database.auth.expireDays}),window.location.href="/course/spanish-from-english/"},window._Login=async(t,c)=>{if(!1===window._test_credentials_correct)throw new Error("Incorrect username or password");if(!0===window._test_credentials_correct)return window._fakeLogin();const s=await(await fetch(`${a.a.database.remote}/_session`,{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:c})})).json();if(s.error){if("unauthorized"===s.error)throw new Error("Username or password is incorrect");throw new Error("Couldn't log in. Please try again later")}e.update(e=>({...e,online:null})),b.a.set("loginDb",Object(n.a)(t),{expires:a.a.database.auth.expireDays}),window.location.reload(!1),window.location.href="/course/spanish-from-english/"},window._Logout=async()=>{try{r&&(await r.cancel(),await fetch(`${a.a.database.remote}/_session`,{method:"delete"}))}finally{b.a.remove("loginDb"),e.update(e=>({...e,user:null,online:null})),await(async()=>{const e=await o.allDocs();await Promise.all(e.rows.map((function(e){return o.remove(e.id,e.value.rev)})))})(),window.location.reload(!1)}};const s=()=>{r=o.sync(l).on("complete",(function(){e.update(e=>({...e,online:!0}))})).on("error",(function(){e.update(e=>({...e,online:!1}))}))}}if(void 0!==e.env.JEST_WORKER_ID){const e=c(51);o=new e(a.a.database.local),o.__reset=async()=>{const e=await o.allDocs();await Promise.all(e.rows.map((function(e){return o.remove(e.id,e.value.rev)})))}}t.a=o}).call(this,c(31))},54:function(e,t,c){"use strict";t.a=e=>`userdb-${(e=>e.split("").map(e=>e.charCodeAt(0).toString(16)).join(""))(e)}`},67:function(e,t){},94:function(e,t,c){"use strict";var a=c(0),n=c(60);function s(e){let t,c,n;return{c(){t=Object(a.A)("input"),this.h()},l(e){t=Object(a.n)(e,"INPUT",{class:!0,type:!0,name:!0,id:!0}),this.h()},h(){Object(a.h)(t,"class","input"),Object(a.h)(t,"type","text"),Object(a.h)(t,"name",e[2]),Object(a.h)(t,"id",e[2]),Object(a.fb)(t,"is-danger",null!=e[5])},m(s,b){Object(a.K)(s,t,b),Object(a.ab)(t,e[0]),c||(n=Object(a.M)(t,"input",e[7]),c=!0)},p(e,c){4&c&&Object(a.h)(t,"name",e[2]),4&c&&Object(a.h)(t,"id",e[2]),1&c&&t.value!==e[0]&&Object(a.ab)(t,e[0]),32&c&&Object(a.fb)(t,"is-danger",null!=e[5])},d(e){e&&Object(a.z)(t),c=!1,n()}}}function b(e){let t,c,n;return{c(){t=Object(a.A)("input"),this.h()},l(e){t=Object(a.n)(e,"INPUT",{class:!0,type:!0,name:!0,id:!0}),this.h()},h(){Object(a.h)(t,"class","input"),Object(a.h)(t,"type","password"),Object(a.h)(t,"name",e[2]),Object(a.h)(t,"id",e[2]),Object(a.fb)(t,"is-danger",null!=e[5])},m(s,b){Object(a.K)(s,t,b),Object(a.ab)(t,e[0]),c||(n=Object(a.M)(t,"input",e[8]),c=!0)},p(e,c){4&c&&Object(a.h)(t,"name",e[2]),4&c&&Object(a.h)(t,"id",e[2]),1&c&&t.value!==e[0]&&Object(a.ab)(t,e[0]),32&c&&Object(a.fb)(t,"is-danger",null!=e[5])},d(e){e&&Object(a.z)(t),c=!1,n()}}}function o(e){let t,c;return{c(){t=Object(a.A)("p"),c=Object(a.eb)(e[5]),this.h()},l(n){t=Object(a.n)(n,"P",{class:!0});var s=Object(a.l)(t);c=Object(a.p)(s,e[5]),s.forEach(a.z),this.h()},h(){Object(a.h)(t,"class","help is-danger")},m(e,n){Object(a.K)(e,t,n),Object(a.f)(t,c)},p(e,t){32&t&&Object(a.Z)(c,e[5])},d(e){e&&Object(a.z)(t)}}}function l(e){let t,c,l,r,i,O,j,u,f,h,d="text"===e[4]&&s(e),p="password"===e[4]&&b(e);u=new n.a({props:{size:"small",icon:e[3],left:!0}});let m=null!=e[5]&&o(e);return{c(){t=Object(a.A)("div"),c=Object(a.A)("label"),l=Object(a.eb)(e[1]),r=Object(a.cb)(),i=Object(a.A)("div"),d&&d.c(),O=Object(a.cb)(),p&&p.c(),j=Object(a.cb)(),Object(a.t)(u.$$.fragment),f=Object(a.cb)(),m&&m.c(),this.h()},l(n){t=Object(a.n)(n,"DIV",{class:!0});var s=Object(a.l)(t);c=Object(a.n)(s,"LABEL",{class:!0,for:!0});var b=Object(a.l)(c);l=Object(a.p)(b,e[1]),b.forEach(a.z),r=Object(a.o)(s),i=Object(a.n)(s,"DIV",{class:!0});var o=Object(a.l)(i);d&&d.l(o),O=Object(a.o)(o),p&&p.l(o),j=Object(a.o)(o),Object(a.m)(u.$$.fragment,o),o.forEach(a.z),f=Object(a.o)(s),m&&m.l(s),s.forEach(a.z),this.h()},h(){Object(a.h)(c,"class","label"),Object(a.h)(c,"for",e[2]),Object(a.h)(i,"class","control has-icons-left"),Object(a.h)(t,"class","field")},m(e,n){Object(a.K)(e,t,n),Object(a.f)(t,c),Object(a.f)(c,l),Object(a.f)(t,r),Object(a.f)(t,i),d&&d.m(i,null),Object(a.f)(i,O),p&&p.m(i,null),Object(a.f)(i,j),Object(a.O)(u,i,null),Object(a.f)(t,f),m&&m.m(t,null),h=!0},p(e,[n]){(!h||2&n)&&Object(a.Z)(l,e[1]),(!h||4&n)&&Object(a.h)(c,"for",e[2]),"text"===e[4]?d?d.p(e,n):(d=s(e),d.c(),d.m(i,O)):d&&(d.d(1),d=null),"password"===e[4]?p?p.p(e,n):(p=b(e),p.c(),p.m(i,j)):p&&(p.d(1),p=null);const r={};8&n&&(r.icon=e[3]),u.$set(r),null!=e[5]?m?m.p(e,n):(m=o(e),m.c(),m.m(t,null)):m&&(m.d(1),m=null)},i(e){h||(Object(a.gb)(u.$$.fragment,e),h=!0)},o(e){Object(a.hb)(u.$$.fragment,e),h=!1},d(e){e&&Object(a.z)(t),d&&d.d(),p&&p.d(),Object(a.x)(u),m&&m.d()}}}function r(e,t,c){let{name:a}=t,{id:n}=t,{icon:s}=t,{type:b="text"}=t,{value:o}=t,{formStatus:l={}}=t,r=null;return e.$set=e=>{"name"in e&&c(1,a=e.name),"id"in e&&c(2,n=e.id),"icon"in e&&c(3,s=e.icon),"type"in e&&c(4,b=e.type),"value"in e&&c(0,o=e.value),"formStatus"in e&&c(6,l=e.formStatus)},e.$$.update=()=>{68&e.$$.dirty&&c(5,r=l[n])},[o,a,n,s,b,r,l,function(){o=this.value,c(0,o)},function(){o=this.value,c(0,o)}]}class i extends a.a{constructor(e){super(),Object(a.J)(this,e,r,l,a.X,{name:1,id:2,icon:3,type:4,value:0,formStatus:6})}}t.a=i}}]);